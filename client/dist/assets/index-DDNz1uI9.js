import{r as l,j as t}from"./react-DOKUib4L.js";import{c as yt}from"./react-dom-BvBpDugK.js";import{L as Nt,M as St,F as Et,a as Ct,b as Rt,c as Lt,T as Pt,d as At,e as Ot,G as kt,f as It,g as Te,h as $e,R as Tt,i as $t,I as Ft,j as Mt,k as Dt,B as Bt,l as Ut,m as zt,n as Vt,o as qt,p as Gt,q as Wt,r as Ht,s as Xt,t as Kt,u as Yt,v as Fe,w as Me,x as Qt,y as Zt}from"./react-icons-1fvaokPF.js";import{a as v,c as S,P as Jt}from"./react-redux-C2QVzL3I.js";import{c as Z,a as es,i as ts,b as ss}from"./@reduxjs-BqbeDH-U.js";import{v as h}from"./uuid-C6aID195.js";import{S as ns,L as De}from"./lucide-react-DimlRIsM.js";import{z as y}from"./zod-mSkvzYyn.js";import{d as rs}from"./styled-components-D_5_OTnU.js";import{L as V,u as de,N as O,a as F,b as as,O as ue,c as is,R as os,d as b,B as ls}from"./react-router-BpgcbLad.js";import{a as cs}from"./axios-t--hEgTQ.js";import{u as J}from"./react-hook-form-DUGg7ZhA.js";import{s as ee}from"./@hookform-Bw1q55SB.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./use-sync-external-store-ruIS0Fp4.js";import"./redux-BXkGT1VS.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-utOO-l3Z.js";import"./tslib-CGNu0TuM.js";import"./@emotion-sScrWPmR.js";import"./stylis-DinRj2j6.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const ds={isSideOpen:!1},Be=Z({name:"sidebar",initialState:ds,reducers:{setIsSideOpen:(e,s)=>{e.isSideOpen=s.payload},toggleSide:e=>{e.isSideOpen=!e.isSideOpen}}}),{setIsSideOpen:Ne,toggleSide:us}=Be.actions,Ue=e=>e.sidebar;var $=(e=>(e.REGISTER="/auth/register",e.LOGIN="/auth/login",e.FORGOT_PASSWORD="/auth/forgot-pwd",e.VERIFY_EMAIL="/auth/verify-account",e))($||{});const te=[{label:"Register",path:"/auth/register",icon:Nt},{label:"Login",path:"/auth/login",icon:St},{label:"Verify email",path:"/auth/verify-account",icon:Et},{label:"Recover account",path:"/auth/forgot-pwd",icon:Ct}],ze=te.find(e=>e.path==="/auth/verify-account"),se={field:"email",label:"Email",type:"email"},Ve=[{field:"firstName",label:"First Name",place:"Your First Name..."},{field:"lastName",label:"Last Name",place:"Your Last Name..."},se].map(e=>({...e,id:h()})),qe={field:"password",label:"Password",type:"password"},ms={field:"confirmPassword",label:"Confirm Password",place:"Confirm Your Password...",type:"password"},Ge=[qe,ms].map(e=>({...e,id:h()})),ps=[Ve.map(e=>e.field),[...Ge.map(e=>e.field),"terms"]],fs="abcdefghilmopqzwyx".split("").flatMap(e=>[e.toUpperCase(),e]).concat("0123456789".split("")).concat("~!@#$%^&*()_-=+{}[].?,'".split("")),z=[{reg:/(?=.*[A-Z])/,icon:Rt},{reg:/(?=.*[a-z])/,icon:Lt},{reg:/(?=.*\d)/,icon:Pt},{reg:/(?=.*[\W_])/,icon:At},{reg:/.{8,}/,icon:Ot}].map(e=>({...e,id:h()})),[xs,hs,gs,_s]=te,me={...xs,msg:"Don't have an' account ?",msgBold:"Register"},js={...hs,msg:"Already have an' account ?",msgBold:"Login"},We={...gs,msg:"Email did not arrive ?",msgBold:"Send new email"},He={..._s,msg:"Forgot password ?",msgBold:"Recover"},bs=[js,We].map(e=>({...e,id:h()})),ws=[me,He].map(e=>({...e,id:h()})),vs=[me,We].map(e=>({...e,id:h()})),ys=[me,He].map(e=>({...e,id:h()})),Ns=[{label:"Home",path:"/",icon:kt},{label:"Books",path:"to-do",icon:It}].map(e=>({...e,id:h()})),Ss={label:"Account",icon:Tt},Es=[...te].map(e=>({...e,id:h()})),Cs={label:"My Account",icon:ns},Rs=[{label:"Profile settings",path:"/user/profile-settings",icon:Te},ze,{label:"Manage Account",path:"/user/manage-account",icon:$e}].map(e=>({...e,id:h()})),Ls=[{label:"Source code",url:"https://github.com/AlexanderMatveev2908/PERN__BOOK",icon:$t},{label:"MERN Food App",url:"https://food-app-aqkc.onrender.com",icon:Ft},{label:"MERN Booking App",url:"https://mern-booking-app-0w8v.onrender.com",icon:Mt},{label:"React X0",url:"https://react-x0.onrender.com",icon:Dt},{label:"React Calculator",url:"https://react-calculator-imc7.onrender.com",icon:Bt},{label:"REACT Form",url:"https://react-form-ytsc.onrender.com",icon:Ut}].map(e=>({...e,id:h()})),Ps=te.map(e=>({...e,id:h()})),As=[{label:"Profile settings",path:"/user/profile-settings",icon:Te},ze,{label:"Manage Account",path:"/user/manage-account",icon:$e}].map(e=>({...e,id:h()})),k={sm:640,md:768,lg:1024,xl:1280},Xe=(e,s)=>!Object.keys(e??{}).length&&Object.values(s??{}).every(n=>{var a;return typeof n=="string"?!!((a=n==null?void 0:n.trim())!=null&&a.length):typeof n=="boolean"?n:Array.isArray(n)?n==null?void 0:n.length:n}),Os=(e,s)=>{var i;let n=!0,a=s.length-1;do{const r=s[a];if((i=e[r])!=null&&i.message){n=!1;break}a--}while(a>=0);return n},ks=(e,s)=>Math.random()*(s-e)+e,Is=e=>{let s=e.length-1;do{const n=Math.floor(Math.random()*(s+1));[e[s],e[n]]=[e[n],e[s]],s--}while(s>0);return e},Ts=/^\/[/]*$/,Se=/^[a-zA-ZÀ-ÿ`'-\s]+$/,Ke=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_])[A-Za-zÀ-ÿ\d\W_]{8,}$/,ne=()=>({email:y.string().min(1,"Email is required").max(50,"Email too long").email("Invalid Email Format")}),Ye=()=>({password:y.string().min(1,"Password is required").max(30,"Password too long").regex(Ke,"Invalid password format").nullable()}),$s={...ne(),...Ye()},Fs=y.object({firstName:y.string().min(1,"First Name is required").max(30,"First Name must be less than 30 characters").regex(Se,"Invalid First Name format"),lastName:y.string().min(1,"Last Name is required").max(30,"First Name must be less than 30 characters").regex(Se,"Invalid Last Name format"),...ne(),...Ye(),confirmPassword:y.string().min(1,"You must confirm your password"),terms:y.boolean().nullable()}).refine(e=>e.firstName.trim(),{message:"First Name is required",path:["firstName"]}).refine(e=>e.lastName.trim(),{message:"First Name is required",path:["lastName"]}).refine(e=>e.confirmPassword===e.password,{message:"Passwords don't match",path:["confirmPassword"]}).refine(e=>e.email!==e.password,{message:"Email and Password must be different",path:["password"]}).refine(e=>e.terms,{message:"You must accept the terms",path:["terms"]});var Qe=(e=>(e.ACCESS_EXPIRED="ACCESS_EXPIRED",e.ACCESS_INVALID="ACCESS_INVALID",e.ACCESS_NOT_PROVIDED="ACCESS_NOT_PROVIDED",e))(Qe||{}),Y=(e=>(e.REFRESH_NOT_EMITTED="REFRESH_NOT_EMITTED ",e.REFRESH_EXPIRED="REFRESH_EXPIRED ",e.REFRESH_INVALID="REFRESH_INVALID ",e.REFRESH_NOT_PROVIDED="REFRESH_NOT_PROVIDED ",e))(Y||{}),_=(e=>(e.OK="SUCCESS",e.ERR="ERROR",e.INFO="INFO",e))(_||{}),q=(e=>(e.REGISTER="/auth/register",e.FORGOT_PWD="/auth/forgot-pwd",e.VERIFY_ACCOUNT="/auth/verify-cb",e.EXP="EXP",e.GEN="GEN",e))(q||{}),Ze=(e=>(e.LOGOUT="/auth/logout",e))(Ze||{}),G=(e=>(e.USER="USER",e))(G||{}),N=(e=>(e.ACCESS="accessToken",e.NOTICE="notice",e.INIT="init",e))(N||{});const Je=e=>[...Object.values(Qe)].includes(e),pe=e=>e==="/refresh",Ms=e=>e===Ze.LOGOUT,Ds=e=>{const{data:s,status:n,config:a}=e;return Je(s==null?void 0:s.msg)||pe(a==null?void 0:a.url)||[403,429].includes(n)},et=(e,s)=>(e==null?void 0:e[s])??null,fe=e=>(e==null?void 0:e.msg)||(e==null?void 0:e.message)||"The AI that manage the database has revolted and is taking control of all servers ⚙️",M=({data:e,key:s})=>{if(e==null)throw new Error("Invalid storage data");sessionStorage.setItem(s,typeof e!="object"?e:JSON.stringify(e))},xe=e=>sessionStorage.getItem(e),he=()=>{sessionStorage.clear()},re=(e,s)=>!!Object.keys(e??{}).length&&Object.values(e??{}).every(n=>n||n!==void 0),L=(e,...s)=>{var d,m;const c=(((((m=(((d=new Error().stack)==null?void 0:d.split(`
`))??[])[2])==null?void 0:m.trim())||"unknown caller").split(" ").pop()||"unknown path").split("/").pop()||"unknown path").split(".").shift();console.group(e.toUpperCase()),console.log(c);for(const u of s)console.log(u);console.groupEnd()};let ce=null;const Bs=e=>ce=e,ge=(e,s)=>ce?ce(e,s):null,Us=e=>Object.values(q).includes(e),zs=e=>`We've sent you an email ${e}. If you don't see it, check your spam folder, it might be partying there 🎉`,Vs=e=>e.split("_").join(" "),Ee=()=>ks(-1200,1200),ae=({isAging:e,isPending:s,label:n,type:a="submit",Icon:i,isDisabled:r})=>{const o=l.useRef(null),[c]=l.useState(Array.from({length:30},()=>h()));return l.useEffect(()=>{const d=m=>{if(o.current&&o.current.contains(m.target)){let u=0;do{const f=document.getElementById(c[u]);if(!f){u++;continue}f.classList.remove("el__bubble"),requestAnimationFrame(()=>f.classList.add("el__bubble")),u++}while(u<c.length)}};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[c]),e?t.jsx("div",{className:"w-full flex justify-center",children:t.jsx(st,{})}):t.jsxs("button",{type:a,ref:o,disabled:r||s,className:"appearance-none w-full el__border_sm py-2 px-10 flex justify-center items-center disabled:opacity-50 btn__container",children:[c.map((d,m)=>t.jsx("div",{id:d,className:`absolute bottom-1/2 rounded-full pointer-events-none ${m%2===0?"w-[8px] h-[8px] border-2 border-blue-600":"h-[5px] w-[5px] bg-blue-600"} `,style:{left:"50%",top:"50%",translate:"-50% -50%","--pos":`${Ee()}%, ${Ee()}%`,transform:"scale(0)",opacity:"0"}},d)),t.jsxs("div",{className:"w-full flex justify-center items-center gap-5",children:[i&&t.jsx(i,{className:"icon__sm"}),t.jsx("span",{className:"txt__3",children:s?"Pending...":n})]})]})},qs=({isDropOpen:e,setIsDropOpen:s,el:n})=>t.jsxs("div",{onClick:()=>s(!e),className:"w-full grid grid-cols-[1fr_50px] group cursor-pointer",children:[t.jsxs("div",{className:"w-fit flex gap-5 justify-start items-center",children:[t.jsx(n.icon,{className:"icon__md icon__with_txt"}),t.jsx("span",{className:"txt__2 group-hover:text-blue-600 el__flow",children:n.label})]}),t.jsx(zt,{className:`icon__md icon__with_txt justify-self-end ${e?"rotate-180":""} `})]}),tt=()=>t.jsx("div",{className:"w-[35px] h-[35px] border-[4px] border-blue-600 border-r-transparent border-b-transparent rounded-full el__mini_spinner"}),st=()=>{const[e]=l.useState(Array.from({length:4},()=>h()));return t.jsx("div",{className:"flex  gap-[15px] items-center",children:e.map((s,n)=>t.jsx("div",{id:s,className:"min-w-[35px] min-h-[35px] bg-blue-600 rounded-full el__spinner_btn",style:{"--delay_spinner_btn":n*.25+"s"}}))})},Gs=()=>{const[e,s]=l.useState(Array.from({length:window.innerWidth<k.sm?10:15},()=>h()));return l.useEffect(()=>{const n=()=>{s(Array.from({length:window.innerWidth<k.sm?10:15},()=>h()))};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t.jsx("div",{className:"center_abs",children:t.jsx("div",{className:"relative",children:e.map((n,a)=>t.jsx("div",{className:"el__spinner_page_in center_abs",style:{"--start__scale":`${(a||1)/e.length}`,rotate:`${360/e.length*a}deg`,"--delay_page":`${a*1/e.length}s`}},n))})})},Ws=({txt:e})=>{const s=l.useRef(null),n=l.useRef(null);l.useEffect(()=>{const i=r=>{s.current&&n.current&&s.current.contains(r.target)&&(n.current.classList.remove("el__tooltip"),requestAnimationFrame(()=>{var o;return(o=n==null?void 0:n.current)==null?void 0:o.classList.add("el__tooltip")}))};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const a=async()=>{try{await navigator.clipboard.writeText(e)}catch{}};return t.jsxs("button",{onClick:a,type:"button",ref:s,className:"relative w-full flex justify-start",children:[e&&t.jsx("div",{className:"el__cpy_txt appearance-none el__border_sm py-1 px-5 cursor-pointer",children:t.jsx("span",{className:"txt__2",children:e})}),t.jsx("div",{ref:n,className:"absolute el__border_sm -top-[120%] py-1 px-5 z-60 bg-[#000] left-0 min-w-[200px] flex justify-center tooltip pointer-events-none",style:{opacity:"0",transform:"translateY(50px)"},children:t.jsx("span",{className:"txt__1",children:"Copied to clipboard"})})]})},nt=({classCSS:e})=>t.jsx("div",{className:"w-fit h-fit",children:t.jsx(Vt,{className:`text-red-600 ${e}`})}),Hs=rs.main`
  display: flex;
  color: ${({color:e})=>e};
  .el__ {
  }
`,Xs=()=>t.jsx(Hs,{color:"red",children:t.jsx(V,{to:"/protected",className:"txt__4",children:"PROTECTED"})}),_e=({title:e,customStyle:s})=>t.jsx("div",{className:"w-full flex justify-center txt__col",children:t.jsx("h1",{className:`${s??"txt__5"}`,children:e})}),Ks=()=>{const e=de().pathname,s=$.LOGIN===e?ws:$.REGISTER===e?bs:$.FORGOT_PASSWORD===e?vs:ys;return t.jsx("div",{className:"w-full txt__col grid gap-y-5 md:grid-cols-2 justify-items-center",children:s.map(n=>t.jsxs("div",{className:"w-fit flex items-center justify-start gap-5  group",children:[t.jsx(n.icon,{className:"icon__sm"}),t.jsxs("div",{className:"w-full flex items-center gap-3",children:[t.jsx("span",{className:"txt__1",children:n.msg}),t.jsx(V,{to:n.path,className:"txt__2 el__flow hover:text-blue-600 el__after_below",children:n.msgBold})]})]},n.id))})},Ys={isLogged:!!sessionStorage.getItem("accessToken"),loggingOut:!1,pushedOut:!1},C=Z({name:"auth",initialState:Ys,reducers:{login:e=>{e.isLogged=!0},logout:e=>{e.isLogged=!1},setLoggingOut:(e,s)=>{e.loggingOut=s.payload},setPushedOut:(e,s)=>{e.pushedOut=s.payload}}}),{login:Qs,logout:Zs,setLoggingOut:rt,setPushedOut:Js}=C.actions,P=e=>e.auth,ie=({children:e,title:s,canStay:n})=>v(P).isLogged&&!n?t.jsx(O,{to:"/",replace:!0}):t.jsxs("div",{className:"parent__page",children:[t.jsx(_e,{title:s}),e,t.jsx(Ks,{})]}),at=(e,s)=>{var r;const[n,a]=l.useState(null),i=(r=e==null?void 0:e[s])==null?void 0:r.message;return l.useEffect(()=>{i&&!n&&a(i)},[i,n,e]),{prevErr:n}},it=({errors:e,el:s})=>{var a,i;const{prevErr:n}=at(e,s.field);return t.jsx("div",{className:`absolute -top-[75%] right-0 transition-all pointer-events-none duration-300 text-red-600 border-2 border-red-600 rounded-xl py-1 px-5 bg-[#000] z-40 ${(a=e[s.field])!=null&&a.message?"translate-y-0 opacity-100":"translate-y-[200%] opacity-0"}`,children:t.jsx("span",{className:"txt__1",children:((i=e[s.field])==null?void 0:i.message)??n})})},je=({el:e,register:s,errors:n,isPwd:a,handleClick:i,setFocus:r})=>t.jsx("div",{className:"w-full grid",children:t.jsxs("label",{className:"grid w-full gap-2 relative",children:[t.jsx("span",{className:"txt__2",children:e.label}),t.jsxs("div",{className:"w-full flex relative",children:[t.jsx("input",{type:a?"password":"text",placeholder:e.place??`Your ${e.label}...`,className:"input__icon txt__2",...s(e.field),onFocus:()=>r==null?void 0:r(!0),onBlur:()=>{r==null||r(!1)},autoComplete:"off"}),t.jsx("button",{onClick:i,type:"button",className:"absolute top-1/2 -translate-y-1/2 right-[20px] btn__pwd",children:a?t.jsx(qt,{className:"icon__sm"}):t.jsx(Gt,{className:"icon__sm"})}),t.jsx(it,{errors:n,el:e})]})]})}),ot=({register:e,errors:s,el:n,customSTyle:a})=>t.jsxs("div",{className:"w-full relative",children:[t.jsx("input",{type:n.type??"text",placeholder:n.place??`Your ${n.label}...`,className:`${a??"input__base"} txt__2`,...e(n.field)}),t.jsx(it,{errors:s,el:n})]}),be=({el:e,register:s,errors:n})=>t.jsx("div",{className:"w-full grid",children:t.jsxs("label",{className:"grid w-full gap-2 relative",children:[t.jsx("span",{className:"txt__2",children:e.label}),t.jsx(ot,{el:e,register:s,errors:n})]})}),en=({children:e,min:s})=>t.jsx("div",{className:"max-w-full justify-items-center gap-y-5",style:{display:"grid",gridTemplateColumns:`repeat(auto-fit, minmax(${s}px, 1fr))`},children:e}),tn=({pwd:e,focus:s})=>{const n=l.useMemo(()=>z.reduce((o,c)=>o&&c.reg.test(e??""),!0),[e]),a=l.useCallback((o,c)=>typeof o=="object"?"text-blue-600 border-blue-600":c.reg.test(o)?"text-green-600 border-border-green-600":"text-red-600 border-red-600",[]),i=z.slice(0,z.length-1),r=z.slice(z.length-1)[0];return t.jsxs("div",{className:`w-full grid sm:grid-cols-[1fr_100px] gap-y-5 absolute border-2 border-blue-600 z-60 bg-[#000] p-3 rounded-xl left-0 top-[120%] pointer-events-none el__flow ${s&&!n?"":"translate-y-full opacity-0"}`,children:[t.jsx(en,{min:50,children:i.map(o=>t.jsx("div",{className:`border-2 rounded-xl p-2 el__flow flex items-center gap-5 justify-center ${a(e,o)}`,children:t.jsx(o.icon,{className:"icon__sm"})},o.id))}),t.jsx("div",{className:"w-full flex justify-center h-fit",children:t.jsxs("div",{className:`border-2 rounded-xl p-2 el__flow flex items-center gap-5 justify-center ${a(e,r)}`,children:[t.jsx(r.icon,{className:"icon__sm"}),t.jsxs("div",{className:"w-full flex gap-2",children:[t.jsx("span",{className:"txt__2",children:(e==null?void 0:e.length)??0}),t.jsx("span",{className:"txt__2",children:"/"}),t.jsx("span",{className:"txt__2",children:"8"})]})]})})]})},sn=({register:e,errors:s,mainPwd:n,pwd:a,el:i})=>{const[r,o]=l.useState(!1);return t.jsxs("div",{className:"w-full relative",children:[t.jsx(je,{el:i,register:e,errors:s,...n,setFocus:o}),t.jsx(tn,{pwd:a,focus:r})]})},nn=({currForm:e,totLen:s})=>{const[n]=l.useState(Array.from({length:s},()=>h()));return t.jsx("div",{className:"w-full grid max-w-[600px]",children:t.jsxs("div",{className:"w-full relative flex justify-between",children:[t.jsx("div",{className:`absolute border-[3px] border-blue-600 top-1/4\r
        left-0 w-full z-10 h-[25px] rounded-full transition-all duration-500`}),t.jsx("div",{className:`absolute border-[3px] border-blue-600 bg-blue-600 top-1/4
        left-0 w-full z-10 h-[25px] rounded-full transition-all duration-500`,style:{width:`${100/s*(e+1)}%`}}),n.map((a,i)=>t.jsx("div",{className:"w-full flex z-30 justify-end",children:t.jsx("div",{className:`border-[3px]  rounded-full h-[45px] w-[45px] flex justify-center items-center transition-all duration-500 txt__col ${i===e?"scale-[1.35]":""} ${e>=i?"bg-blue-600 border-[whitesmoke]":"border-blue-600 bg-neutral-950"}`,children:i+1===s?t.jsx(Wt,{className:"min-w-[25px] min-h-[25px]"}):t.jsx("span",{className:`${i===e?"txt__4":"txt__3"}`,children:i+1})})},a))]})})},rn=()=>{const[e,s]=l.useState(""),n=i=>{let c=0;const d=new Uint8Array(16);let m="";for(;!Ke.test(m)&&c<100;){window.crypto.getRandomValues(d);const u=[];let f=15;do{const j=d[f]%i.length;u[f]=i[j],f--}while(f>=0);m=u.join(""),c++}return c<100?m:""},a=()=>{const i=Is(fs),r=n(i);s(r)};return t.jsxs("div",{className:"w-full grid gap-y-3 sm:grid-cols-2",children:[t.jsxs("button",{type:"button",onClick:a,className:"w-fit flex items-center justify-start gap-5 cursor-pointer el__after_below el__flow hover:text-blue-600 appearance-none",children:[t.jsx(Ht,{className:"icon__md"}),t.jsx("span",{className:"txt__2",children:"Generate password"})]}),t.jsx(Ws,{txt:e})]})},lt=({register:e,errors:s,handleSave:n})=>t.jsx("div",{className:"parent__form",children:t.jsx("form",{onSubmit:n,className:"form__content",children:t.jsxs("div",{className:"w-full grid gap-5 p-6",children:[t.jsx(be,{register:e,errors:s,el:se}),t.jsx("div",{className:"max-w-[250px] w-full justify-self-center mt-10",children:t.jsx(ae,{label:"Login",isDisabled:!1,isPending:!1})})]})})}),ct=({canStay:e=!0,isLoading:s=!1,isError:n=!1,push:a=!1,error:i=null,children:r=null})=>{const{response:{data:o,status:c}={}}=i??{};return e?s?t.jsx("div",{className:"min-h-[100vh] relative -mt-[50px]",children:t.jsx(Gs,{})}):n?a?t.jsx(O,{to:"/",replace:!0}):t.jsxs("div",{className:"grid justify-items-center items-start gap-[25px] txt__col",children:[t.jsxs("div",{className:"h-fit flex items-center gap-5",children:[t.jsx("span",{className:"txt__6",children:c}),t.jsx("span",{className:"txt__4 leading-[35px] tracking-wider",children:fe(o)})]}),t.jsx(nt,{classCSS:"icon__notice_md"})]}):r:t.jsx(O,{to:"/",replace:!0})},an=({children:e})=>{const s=v(P);return!s.isLogged&&!s.loggingOut&&!s.pushedOut?t.jsx(O,{to:"/auth/login",replace:!0}):e},I=()=>{l.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[])},dt=()=>{const[e,s]=l.useState(!0),[n,a]=l.useState(!0);return{mainPwd:{isPwd:e,handleClick:()=>{n||a(!0),s(c=>!c)}},confirmPwd:{isPwd:n,handleClick:()=>{e||s(!0),a(c=>!c)}},closeAllPwd:()=>{s(!0),a(!0)}}},on={isToastPrev:!1,isToast:!1,toast:null},W=Z({name:"toast",initialState:on,reducers:{openToast:(e,s)=>{e.isToastPrev=e.isToast,e.isToast=!0,e.toast=s.payload},closeToast:e=>{e.isToastPrev=!1,e.isToast=!1},reopenToast:e=>{e.isToastPrev=!1,e.isToast=!0}}}),{openToast:we,closeToast:Ce,reopenToast:ln}=W.actions,cn=e=>e.toast,Re=xe(N.NOTICE),dn=Re?{...JSON.parse(Re),cb:null}:{notice:"",type:_.OK,cb:null},ve=Z({name:"notice",initialState:dn,reducers:{setNotice:(e,s)=>s.payload}}),{setNotice:ut}=ve.actions,un=e=>e.notice,mt=()=>{const e=F(),s=S();return{handleErrAPI:l.useCallback(({err:a,push:i,pushNotice:r})=>{const{response:o}=a??{},{data:c,status:d}=o??{};if(Ds(o))return null;const m=fe(c);if(s(we({type:_.ERR,msg:m,statusCode:d})),i&&r)throw new Error("Can not send user to different places at same time");return i?e("/",{replace:!0}):r!=null&&r[0]&&(s(ut({notice:m,type:_.ERR,cb:(r==null?void 0:r[1])??null})),M({data:{notice:c==null?void 0:c.msg,type:_.ERR},key:N.NOTICE}),e("/notice",{replace:!0,state:{from:q.GEN}})),null},[s,e])}},oe=()=>{const e=S(),{handleErrAPI:s}=mt();return{wrapMutationAPI:l.useCallback(async({cbAPI:a,push:i,pushNotice:r})=>{try{const o=await a().unwrap();return L("mutation api",o),e(we({type:_.OK,msg:(o==null?void 0:o.msg)||"operation successful",statusCode:o==null?void 0:o.status})),o}catch(o){return L("err mutation",o),s({err:o,push:i,pushNotice:r})}},[s,e])}},mn=({cb:e,alias:s})=>{const n=l.useCallback(()=>e(),[e]);return{[`${s}Cb`]:n}},pt=({isSuccess:e,toast:s,data:n,isError:a,error:i,push:r,pushNotice:o,...c})=>{const d=S(),{handleErrAPI:m}=mt(),u=l.useCallback(async({isSuccess:f,toast:j,data:x,isError:p,error:g,push:D,pushNotice:H})=>{if(f)L("query api",x),j&&d(we({type:_.OK,msg:(x==null?void 0:x.msg)||"operation successful",statusCode:x==null?void 0:x.status}));else if(p)return L("err query",g),m({err:g,push:D,pushNotice:H})},[m,d]);l.useEffect(()=>{u({isSuccess:e,toast:s,data:n,isError:a,error:i,push:r,pushNotice:o})},[e,s,n,a,i,r,o,u])},E=cs.create({baseURL:"http://localhost:3000/api/v1",withCredentials:!0});E.interceptors.request.use(e=>{const s=sessionStorage.getItem("accessToken");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e));const pn=async({url:e,method:s,data:n,params:a})=>{var i;try{const r=await E({url:e,method:s,data:n,params:a});return{data:{...r==null?void 0:r.data,status:r==null?void 0:r.status}}}catch(r){L("err axios",r);const{response:{data:o,config:c,status:d}={}}=r??{},m=pe(c==null?void 0:c.url),u=Ms(c==null?void 0:c.url),f=Je(o==null?void 0:o.msg),j=d!==401||m||!f||u;if(u&&(E.defaults.headers.common.Authorization=null),j)return{error:{...r,response:{...r==null?void 0:r.response,data:{...(i=r==null?void 0:r.response)==null?void 0:i.data,loggingOut:u}}}};try{const{data:x}=await E.post("/refresh");M({data:x.accessToken,key:N.ACCESS}),E.defaults.headers.common.Authorization=`Bearer ${x.accessStorage}`;const p=await E({url:e,method:s,data:x,params:a});return L("refresh success",p),{data:{...p==null?void 0:p.data,status:p==null?void 0:p.status,refreshed:!0}}}catch(x){return L("refresh failed",x),E.defaults.headers.common.Authorization=null,{error:x}}}},R=es({baseQuery:pn,tagTypes:[G.USER],reducerPath:"appAPI",endpoints:()=>({})}),Le=async(e,s)=>{const{data:n}=await e;M({data:n.accessToken,key:N.ACCESS}),E.defaults.headers.common.Authorization=`Bearer ${n==null?void 0:n.accessToken}`,s(C.actions.login()),s(R.util.invalidateTags([G.USER]))},fn=R.injectEndpoints({endpoints:e=>({registerUser:e.mutation({query:s=>({url:"/auth/register",method:"POST",data:s}),async onQueryStarted(s,{queryFulfilled:n,dispatch:a}){await Le(n,a)}}),loginUser:e.mutation({query:s=>({url:"/auth/login",method:"POST",data:s}),async onQueryStarted(s,{queryFulfilled:n,dispatch:a}){await Le(n,a)}}),logoutUser:e.mutation({query:()=>({url:"/auth/logout",method:"POST"})})})}),{useRegisterUserMutation:xn,useLogoutUserMutation:hn,useLoginUserMutation:gn}=fn,ft=()=>{const e=F(),[s,{isLoading:n}]=hn({}),a=S(),{wrapMutationAPI:i}=oe();return{handleCLick:l.useCallback(async o=>{const c=await i({cbAPI:()=>s({})});o(),c&&(e("/",{replace:!0}),he(),E.defaults.headers.common.Authorization=null,a(rt(!0)),a(Zs()),a(R.util.resetApiState()))},[s,e,i,a]),isLoading:n}},_n=({handleMainClick:e})=>{const{handleCLick:s,isLoading:n}=ft();return t.jsxs("button",{onClick:()=>s(e),className:"items-center justify-start w-full flex gap-5 el__after_below el__flow hover:text-blue-600",children:[n?t.jsx(tt,{}):t.jsx(De,{className:"icon__sm"}),t.jsx("span",{className:"txt__2",children:"Logout"})]})},K=e=>{if(!(window.innerWidth<k.md))return e()},jn=({isLogged:e,init:s,isVerified:n})=>{const[a,i]=l.useState(!1),[r,o]=l.useState(!1),[c,d]=l.useState(!1),m=l.useRef(null),u=l.useRef(null),f=l.useRef(null);l.useEffect(()=>{const p=g=>{!m.current||!u.current||!m.current.contains(g.target)&&!u.current.contains(g.target)&&i(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),l.useEffect(()=>{(()=>{r&&(f.current=setTimeout(()=>{o(!1)},150))})()},[r]);const j=e?As:Ps,x=()=>{d(!0),i(p=>!p)};return t.jsxs("div",{className:"min-w-full justify-self-end flex justify-end z__drop_header",children:[t.jsx("div",{className:"relative w-[50px] h-[50px]",children:t.jsxs("div",{ref:u,onMouseEnter:()=>{K(()=>{clearTimeout(f.current),f.current=null,o(!1),i(!0)})},onMouseLeave:()=>{K(()=>i(!1))},className:`absolute top-[125%] bg-[#000] el__border_sm p-3 pb-4 grid gap-3 min-w-[250px] transition-all duration-500   right-[-100%] ${r||a?"":"translate-y-1/3 opacity-0 pointer-events-none"}`,children:[j.map(p=>p.path===$.VERIFY_EMAIL&&n?null:t.jsxs(V,{to:p.path,onClick:()=>i(!1),className:"w-full flex items-center gap-5 el__after_below el__flow hover:text-blue-600",children:[t.jsx(p.icon,{className:"icon__sm"}),t.jsx("span",{className:"txt__2",children:p.label})]},p.id)),e&&t.jsx(_n,{handleMainClick:x})]})}),t.jsx("div",{ref:m,onClick:x,className:"group btn__logic w-[45px] h-[45px] flex justify-center items-center",onMouseEnter:()=>{K(()=>{d(!1),i(!0)})},onMouseLeave:()=>{c||K(()=>{i(!1),o(!0)})},children:e&&s?t.jsx("div",{className:"border-blue-600 rounded-xl flex justify-center items-center border-[3px] p-[7.5px] group-hover:text-blue-600 cursor-pointer el__flow",children:t.jsx("span",{className:"txt__3 group-hover:scale-[1.15] el__flow",children:s})}):t.jsx(Xt,{className:"icon__md icon__logic"})})]})},bn=R.injectEndpoints({endpoints:e=>({getUserProfile:e.query({query:()=>({url:"/user/profile",method:"GET"}),providesTags:[G.USER]}),refreshToken:e.mutation({query:()=>({url:"/refresh",method:"POST"})})})}),{useGetUserProfileQuery:xt}=bn,Pe=e=>(e==null?void 0:e.at(0))??"",wn=()=>{const[e,s]=l.useState(xe(N.INIT)??null),n=S(),a=v(Ue).isSideOpen,{isLogged:i}=v(P),r=xt({});pt({...r});const{data:o,isLoading:c}=r,d=et(o,"user");return l.useEffect(()=>{if(re(d)&&!e){const m=Pe(d==null?void 0:d.firstName)+Pe(d==null?void 0:d.lastName);s(m),M({data:m,key:N.INIT})}},[e,d]),t.jsx("div",{className:"w-full border-b-[3px] border-blue-600 sticky top-0 h-[80px] z__header bg-[#000]",children:t.jsxs("div",{className:"w-full h-full items-center grid grid-cols-2 pl-3 pr-4 sm:pr-8",children:[t.jsx(V,{to:"/",className:"txt__6 text-blue-600 w-fit",children:"PERN__BOOK"}),t.jsxs("div",{className:"w-full flex justify-end gap-4 txt__col items-center",children:[c&&!e?t.jsx(tt,{}):t.jsx(jn,{isLogged:i,isLoading:c,init:e,isVerified:d==null?void 0:d.isVerified}),t.jsx("button",{onClick:()=>n(us()),className:"justify-self-end",children:a?t.jsx(Kt,{className:"icon__close"}):t.jsx(Yt,{className:"icon__lg icon__logic"})})]})]})})},ht=({el:e,handleSideClick:s})=>t.jsxs(as,{onClick:s,to:e.path,className:"w-fit flex justify-start gap-5 group el__after_below items-center nav_link",children:[t.jsx(e.icon,{className:"icon__with_txt icon__md"}),t.jsx("span",{className:"txt__2 el__flow group-hover:text-blue-600",children:e.label})]}),vn=({email:e})=>t.jsx("div",{className:"w-full sticky top-0 flex items-center h-[65px] border-b-[3px] border-blue-600 overflow-x-auto scrollbar__app scrollbar__x z-60 bg-[#000]",children:t.jsx("div",{className:"max-w-full flex justify-start px-5 ",children:t.jsx("span",{className:"txt__3 max-w-full text-nowrap",children:e})})}),yn=({handleSideClick:e,user:s})=>{const[n,a]=l.useState(!1),i=v(P),r=i.isLogged?Rs:Es,o=i.isLogged?Cs:Ss;return t.jsxs("div",{className:"w-full grid ",children:[t.jsx(qs,{isDropOpen:n,setIsDropOpen:a,el:o}),t.jsx("div",{className:`w-full grid el__flow ${n?"max-h-[500px] opacity-100":"max-h-0 opacity-0 pointer-events-none"} `,children:t.jsx("div",{className:`grid gap-5 el__flow  ${n?"pt-5":"-translate-y-[50px]"}`,children:r.map(c=>c.path===$.VERIFY_EMAIL&&(s!=null&&s.isVerified)?null:t.jsx(ht,{el:c,handleSideClick:e},c.id))})})]})},Nn=({handleSideClick:e})=>{const{handleCLick:s,isLoading:n}=ft();return n?t.jsx("div",{className:"flex justify-start mt-6",children:t.jsx(st,{})}):t.jsxs("button",{onClick:()=>s(e),className:"w-fit flex justify-start gap-5 group el__after_below items-center",children:[t.jsx(De,{className:"icon__md icon__with_txt"}),t.jsx("span",{className:"txt__2 el__flow group-hover:text-blue-600",children:"Logout"})]})},Sn=()=>{const e=l.useRef(null),[s,n]=l.useState(null),i=v(P).isLogged,r=S(),o=v(Ue).isSideOpen,{data:c}=xt({})??{},d=et(c,"user");l.useEffect(()=>{re(d)&&n(d.email)},[d]),l.useEffect(()=>{const u=f=>{e.current&&!e.current.contains(f.target)&&r(Ne(!1))};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[r]);const m=()=>r(Ne(!1));return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`w-full z__sidebar_bg inset-0 bg-black/50 ${o?"fixed":"hidden"}`}),t.jsx("div",{ref:e,className:`fixed top-[80px] bottom-0 right-0 w-[300px] sm:w-[500px] bg-[#000]  border-l-[3px] border-blue-600 transition-all duration-500 z__sidebar txt__col overflow-y-auto scrollbar__y scrollbar__app ${o?"opacity-100":"opacity-0 translate-x-full"} `,children:t.jsxs("div",{className:"max-w-full relative grid gap-4",children:[typeof s=="string"&&i&&t.jsx(vn,{email:s}),t.jsxs("div",{className:`grid gap-5 px-5 ${i?"":"pt-5"}`,children:[Ns.map(u=>t.jsx(ht,{el:u,handleSideClick:m},u.id)),t.jsx(yn,{handleSideClick:m,user:d}),t.jsx(Nn,{handleSideClick:m})]})]})})]})},En="/assets/1-CdRvRdCC.avif",Cn="/assets/2-B834IbOU.avif",Rn="/assets/3-CCwT6JH8.avif",Ln="/assets/4-Bo6LHwuz.avif",Pn="/assets/5-BOqO4lNR.avif",Q=[En,Cn,Rn,Ln,Pn].flatMap(e=>[{src:e,id:h()},{src:e,id:h()}]),An="_btn__hero_1o4mu_2",Ae={btn__hero:An},Oe=()=>window.innerWidth>=k.lg?350:window.innerWidth>=k.md?300:200,ke=()=>window.innerWidth>k.xl?Q.length-2:window.innerWidth>k.sm?Q.length-1:Q.length,On=()=>{const[e,s]=l.useState(0),[n,a]=l.useState(Oe()),[i,r]=l.useState(ke()),o=l.useRef(!1);l.useEffect(()=>{const u=()=>{a(Oe()),r(ke())};return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const c=()=>{o.current=!0,setTimeout(()=>o.current=!1,1e3)},d=l.useCallback(()=>s(u=>u===i-1?0:u+1),[i]),m=()=>{c(),s(u=>u===0?i-1:u-1)};return l.useEffect(()=>{const u=setInterval(()=>{o.current||d()},1250);return()=>clearInterval(u)},[d]),t.jsx("div",{className:"w-full flex px-10",children:t.jsxs("div",{className:"w-full grid text-[whitesmoke] mt-10 relative",children:[t.jsx("button",{onClick:m,className:`${Ae.btn__hero} group -left-[20px]`,children:t.jsx(Fe,{className:"icon__md icon__with_txt"})}),t.jsx("div",{className:"w-full flex gap-[25px] overflow-hidden p-5 el__border_md",children:t.jsx("div",{className:"flex gap-[25px] transition-all duration-500",style:{transform:`translateX(-${e*(n+25)}px)`},children:Q.map((u,f)=>t.jsx("div",{className:"rounded-xl overflow-hidden",style:{width:n,height:n},children:t.jsx("img",{src:u.src,alt:`img__${f}`,className:"w-full h-full"})},u.id))})}),t.jsx("button",{onClick:()=>{c(),d()},className:`${Ae.btn__hero} -right-[20px] group`,children:t.jsx(Me,{className:"icon__md icon__with_txt"})})]})})},kn=()=>{var x;const e=l.useRef(null),s=l.useRef(null),n=l.useRef(null),a=l.useRef(!1),i=v(cn),{toast:r,isToast:o,isToastPrev:c}=i,d=S(),m=l.useCallback(()=>{e.current.classList.remove("toast__out"),s.current.classList.remove("el__timer_toast"),requestAnimationFrame(()=>{var p,g;(p=e==null?void 0:e.current)==null||p.classList.add("toast__in"),(g=s==null?void 0:s.current)==null||g.classList.add("el__timer_toast")}),n.current=setTimeout(()=>{clearTimeout(n.current),n.current=null,a.current=!0,d(Ce())},3e3)},[d]),u=l.useCallback(()=>{var p;a.current=!1,(p=e==null?void 0:e.current)==null||p.classList.remove("toast__in"),s.current.classList.remove("el__timer_toast"),clearTimeout(n.current),n.current=null,requestAnimationFrame(()=>{var g;(g=e==null?void 0:e.current)==null||g.classList.add("toast__out")})},[]),f=l.useCallback(()=>{var p;(p=e==null?void 0:e.current)==null||p.classList.remove("toast__in"),requestAnimationFrame(()=>{var g;(g=e==null?void 0:e.current)==null||g.classList.add("toast__out")}),clearTimeout(n.current),n.current=null,setTimeout(()=>{d(ln())},300)},[d]);l.useEffect(()=>{(()=>{!e||!s||(o&&c?f():o&&!c?m():!o&&a.current&&u())})()},[o,m,u,f,c]),l.useEffect(()=>{},[]);const j=()=>{a.current=!0,d(Ce())};return t.jsx("div",{ref:e,className:`z__toast fixed top-5 right-5 border-[3px] bg-[#000] rounded-xl w-fit min-w-[300px] sm:min-w-[450px] max-w-[80vw] sm:max-w-[500px] md:max-w-[600px] el__toast_container overflow-hidden ${(r==null?void 0:r.type)===_.OK?"border-green-600":"border-red-600"}`,style:{transform:"translateX(150%)",opacity:0},children:t.jsxs("div",{className:"w-full grid justify-items-start relative pb-2",children:[t.jsx("div",{className:`w-full flex justify-start pt-[4px] px-8 ${(r==null?void 0:r.type)===_.OK?"text-green-600":"text-red-600"}`,children:t.jsxs("div",{className:"w-full flex items-center gap-3",children:[t.jsx("span",{className:"txt__5",children:(r==null?void 0:r.statusCode)??""}),t.jsx("span",{className:"txt__4",children:r==null?void 0:r.type})]})}),t.jsx("div",{className:`absolute top-0 bottom-0 left-0 min-w-[10px] min-h-[120%] ${(r==null?void 0:r.type)===_.OK?"bg-green-600":"bg-red-600"}`}),t.jsx("button",{onClick:j,className:"appearance-none top-[4px] right-[4px] absolute btn__toast",children:t.jsx(Qt,{className:"icon__md text-red-600"})}),t.jsx("div",{className:"w-full flex justify-start txt__col py-1 px-8",children:t.jsx("span",{className:"txt__3",children:(x=r==null?void 0:r.msg)==null?void 0:x.toUpperCase()})}),t.jsx("div",{ref:s,className:`absolute left-0 bottom-0 h-[3px] ${(r==null?void 0:r.type)===_.OK?"bg-green-600":"bg-red-600"}`,style:{width:"100%"}})]})})},In=y.object({...ne()}),Tn=()=>{const{register:e,formState:{errors:s},handleSubmit:n}=J({resolver:ee(In),mode:"onChange"}),a=n(()=>{});return t.jsxs("div",{className:"w-full grid gap-8 sm:gap-4",children:[t.jsx("div",{className:"justify-self-start",children:t.jsx(_e,{title:"Newsletter",customStyle:"txt__4"})}),t.jsxs("form",{onSubmit:a,className:"w-full grid sm:grid-cols-2 gap-5 items-center",children:[t.jsx(ot,{register:e,errors:s,el:se,customSTyle:"input__icon"}),t.jsx("div",{className:"max-w-[200px] justify-self-center sm:justify-self-start",children:t.jsx(ae,{label:"Subscribe",type:"submit",isPending:!1,isDisabled:!1})})]})]})},$n=({el:e})=>t.jsxs("a",{href:e.url,className:"w-fit el__after_below flex items-center gap-5 el__flow hover:text-blue-600",children:[t.jsx(e.icon,{className:"icon__md"}),t.jsx("span",{className:"txt__2",children:e.label})]}),Fn=()=>t.jsxs("div",{className:"w-full border-t-[3px] border-blue-600 grid gap-10 px-5 sm:px-10 pt-5 pb-10 bottom-0 txt__col",children:[t.jsx(V,{to:"/",className:"text-blue-600 w-fit",children:t.jsx("span",{className:"txt__5",children:"LOGO"})}),t.jsx(Tn,{}),t.jsxs("div",{className:"w-full grid gap-5",children:[t.jsx(_e,{title:"Last projects ✌🏼",customStyle:"txt__4"}),t.jsx("div",{className:"gap-5 grid grid-cols-[repeat(auto-fit,_minmax(250px,_1fr))]",children:Ls.map(e=>t.jsx($n,{el:e},e.id))})]})]}),Mn=()=>{const e=de().pathname;return t.jsxs("div",{className:"w-full min-h-screen bg-neutral-950 flex flex-col relative",children:[t.jsx(wn,{}),t.jsx(kn,{}),Ts.test(e)&&t.jsx(On,{}),t.jsx(Sn,{}),t.jsx("div",{className:"w-full px-5 sm:px-10 pt-6 pb-[300px] flex justify-center",children:t.jsx(ue,{})}),t.jsx(Fn,{})]})},Dn=()=>t.jsx(ue,{}),Bn="_btn__swapper_7g1io_2",Ie={btn__swapper:Bn},Un=({currForm:e,setCurrForm:s,totLen:n,children:a,isNextDisabled:i})=>t.jsxs("div",{className:"w-full grid grid-cols-[50px_1fr_50px] items-center",children:[t.jsx("button",{onClick:()=>e&&s(e-1),disabled:!e,className:`justify-self-start ${e?"group":""} ${Ie.btn__swapper}`,children:t.jsx(Fe,{className:"icon__sm icon__with_txt"})}),e===n-1&&a?t.jsx("div",{className:`w-full justify-center sm:col-span-1 ${e===n-1?"col-span-2 sm:col-span-1":""}`,children:a}):t.jsx("div",{}),e===n-1?null:t.jsx("button",{disabled:i,onClick:()=>e<n-1&&s(e+1),className:`justify-self-end ${i?"":"group"} ${Ie.btn__swapper}`,children:t.jsx(Me,{className:"icon__sm icon__with_txt"})})]}),zn="_check__terms_1yd5n_1",Vn="_checky_1yd5n_9",le={check__terms:zn,checky:Vn},qn=({setValue:e,watch:s,errors:n})=>{var o,c;const a=l.useRef(null),{prevErr:i}=at(n,"terms");l.useEffect(()=>{const d=m=>{a.current&&a.current&&a.current.contains(m.target)&&(a.current.classList.remove(le.checky),requestAnimationFrame(()=>{var u;(u=a.current)==null||u.classList.add(le.checky)}))};return document.addEventListener("click",d),()=>document.removeEventListener("click",d)},[]);const r=s("terms");return t.jsxs("div",{className:"w-fit flex items-center justify-start gap-5 relative",children:[t.jsx("div",{onClick:()=>e("terms",!s("terms"),{shouldValidate:!0}),ref:a,className:`min-w-[30px] min-h-[30px] rounded-xl relative el__flow cursor-pointer ${le.check__terms}`,style:{"--check-color":typeof r=="object"?"#2563eb":r?"#16a34a":"#dc2626"},children:t.jsx("div",{className:`absolute border-l-[4px] border-b-[4px] h-5 w-10 border-green-600 -top-[12px] left-0 -rotate-45 transition-all duration-150 delay-75 ${r?"scale-100":"scale-0"}`})}),t.jsx("span",{className:"txt__2",children:"I agree terms and conditions"}),t.jsx("div",{className:`absolute -bottom-[150%] left-0 transition-all duration-300 text-red-600 border-2 border-red-600 rounded-xl py-1 px-5 bg-[#000] z-60 ${(o=n==null?void 0:n.terms)!=null&&o.message?"translate-y-0 opacity-100":"translate-y-[200%] opacity-0"}`,children:((c=n==null?void 0:n.terms)==null?void 0:c.message)||i})]})},Gn=()=>{const[e,s]=l.useState(0),[n,a]=l.useState(!0),i=F(),{mainPwd:r,confirmPwd:o,closeAllPwd:c}=dt(),{wrapMutationAPI:d}=oe(),m=S(),{register:u,formState:{errors:f},watch:j,setValue:x,handleSubmit:p,reset:g}=J({mode:"onChange",resolver:ee(Fs),defaultValues:{firstName:"alex",lastName:"matveev",email:"matveevalexander470@gmail.com",password:"@2}mX_}^]3#lA^w5",confirmPassword:"@2}mX_}^]3#lA^w5",terms:!0}}),[D,{isLoading:H}]=xn(),{registerCb:_t}=mn({cb:()=>m(Qs()),alias:"register"}),jt=p(async w=>{const{confirmPassword:B,terms:U,...X}=w,T=await d({cbAPI:()=>D(X)});if(!re(T))return;g();const ye={notice:zs("to verify your account"),type:_.OK};M({data:ye,key:N.NOTICE}),m(ut({...ye,cb:_t})),i("/notice",{replace:!0,state:{from:q.REGISTER}})}),A=j(),bt=l.useMemo(()=>Xe(f,A),[f,A]);l.useEffect(()=>{(()=>{var X;const B=ps[e];let U=Os(f,B);if(U){for(const T in A)if(B.includes(T)&&(typeof A[T]=="string"?!((X=A[T])!=null&&X.trim()):!A[T])){U=!1;break}}!U&&!n?a(!0):U&&n&&a(!1)})()},[e,f,n,A]);const wt=l.useCallback(w=>{c(),s(w)},[c]),vt=j("password");return t.jsxs("div",{className:"parent__form",children:[t.jsx(nn,{currForm:e,totLen:2}),t.jsx("div",{className:"form__content",children:t.jsxs("form",{onSubmit:jt,className:"w-full overflow-hidden p-6",children:[t.jsxs("div",{className:`w-[200%] flex transition-all duration-500 ${e?"max-h-[350px] min-h-[350px]":"max-h-[300px] min-h-[300px]"}`,style:{transform:`translateX(-${e*50}%)`},children:[t.jsx("div",{className:`w-full grid gap-5 items-start h-fit el__flow ${e?"opacity-0 pointer-events-none":"opacity-100"}`,children:Ve.map(w=>t.jsx(be,{el:w,register:u,errors:f},w.id))}),t.jsxs("div",{className:`w-full grid gap-5 items-start h-fit el__flow ${e?"opacity-100":"opacity-0 pointer-events-none"}`,children:[Ge.map((w,B)=>B?t.jsx(je,{el:w,register:u,errors:f,...o},w.id):t.jsx(sn,{mainPwd:r,pwd:vt,register:u,errors:f,el:w},w.id)),t.jsx(rn,{}),t.jsx(qn,{setValue:x,watch:j,errors:f})]})]}),t.jsx(Un,{currForm:e,setCurrForm:wt,totLen:2,isNextDisabled:n,children:t.jsx("div",{className:"max-w-[250px] justify-self-center",children:t.jsx(ae,{isAging:H,isDisabled:!bt||n,label:"Register"})})})]})})]})},Wn=()=>(I(),t.jsx(ie,{title:"REGISTER",children:t.jsx(Gn,{})})),Hn=y.object({...$s}).refine(e=>e.email!==e.password,{message:"Email and Password can not be equal",path:["password"]}).refine(e=>e.email.trim(),{message:"Email is required",path:["email"]}).refine(e=>((e==null?void 0:e.password)??"").trim(),{message:"Password is required",path:["email"]}),Xn=()=>{const e=F(),s=l.useRef(!1),{wrapMutationAPI:n}=oe(),a=v(P),i=S(),{register:r,formState:{errors:o},handleSubmit:c,reset:d,watch:m}=J({mode:"onChange",resolver:ee(Hn),defaultValues:{email:"matveevalexander470@gmail.com",password:"@2}mX_}^]3#lA^w5"}}),u=m(),[f,{isLoading:j}]=gn(),x=c(async D=>{await n({cbAPI:()=>f(D)})&&(d(),e("/",{replace:!0}))}),{mainPwd:p}=dt(),g=l.useMemo(()=>Xe(o,u),[o,u]);return l.useEffect(()=>{a.pushedOut&&!s.current&&(s.current=!0,i(Js(!1)),R.util.resetApiState())},[a.pushedOut,i]),t.jsx("div",{className:"parent__form",children:t.jsx("form",{onSubmit:x,className:"form__content",children:t.jsxs("div",{className:"w-full grid gap-5 p-6",children:[t.jsx(be,{register:r,errors:o,el:se}),t.jsx(je,{register:r,errors:o,el:qe,...p}),t.jsx("div",{className:"max-w-[250px] w-full justify-self-center mt-10",children:t.jsx(ae,{label:"Login",isDisabled:!g,isAging:j})})]})})})},Kn=()=>(I(),t.jsx(ie,{title:"LOGIN",children:t.jsx(Xn,{})})),Yn=y.object({...ne()}).refine(e=>e.email.trim(),{message:"Email is required",path:["email"]}),gt=()=>{const{register:e,formState:{errors:s},handleSubmit:n}=J({mode:"onChange",resolver:ee(Yn)});return{register:e,errors:s,handleSubmit:n}},Qn=()=>{const{register:e,errors:s,handleSubmit:n}=gt(),a=n(()=>{});return t.jsx(lt,{register:e,errors:s,handleSave:a})},Zn=()=>(I(),t.jsx(ie,{title:"VERIFY ACCOUNT",canStay:!0,children:t.jsx(Qn,{})})),Jn=()=>{const{register:e,errors:s,handleSubmit:n}=gt(),a=n(()=>{});return t.jsx(lt,{errors:s,register:e,handleSave:a})},er=()=>(I(),t.jsx(ie,{title:"RECOVER PASSWORD",children:t.jsx(Jn,{})})),tr=()=>{const e=l.useRef(!1),s=v(un);return l.useEffect(()=>{typeof s.cb=="function"&&!e.current&&(e.current=!0,s.cb())},[s]),t.jsxs("div",{className:"w-full grid justify-items-center gap-y-[75px]",children:[t.jsx("span",{className:"txt__5 txt__col",children:s.notice}),s.type===_.OK?t.jsx("div",{className:"w-fit",children:t.jsx(Zt,{className:"icon__notice_lg text-green-600"})}):t.jsx(nt,{classCSS:"icon__notice_lg"})]})},sr=()=>{var s;I();const e=(s=de().state)==null?void 0:s.from;return Us(e)?t.jsx("div",{className:"parent__page",children:t.jsx(tr,{})}):t.jsx(O,{to:"/",replace:!0})},nr=()=>{const e=l.useRef(!1),s=v(P),n=S();return I(),l.useEffect(()=>{s.loggingOut&&!e.current&&(e.current=!0,n(rt(!1)))},[n,s.loggingOut]),t.jsx("div",{children:t.jsx(Xs,{})})},rr=R.injectEndpoints({endpoints:e=>({verifyAccount:e.mutation({query:s=>({url:"/verify/verify-account",method:"PATCH",data:s}),invalidatesTags:[G.USER]})})}),{useVerifyAccountMutation:ar}=rr,ir=()=>{const[e]=is(),s=l.useRef(!1),n=F(),a=e.get("userID")??"",i=e.get("token")??"",r=e.get("event")??"",{wrapMutationAPI:o}=oe(),[c]=ar(),d=l.useCallback(async()=>{const m={token:i,userID:a,event:r},u=await o({cbAPI:()=>c(m),pushNotice:[!0]});re(u)&&n("/",{replace:!0})},[a,i,r,c,o,n]);return l.useEffect(()=>{s.current||(s.current=!0,d())},[d]),t.jsx(ct,{isLoading:!0})},or=()=>(I(),t.jsx(ir,{})),lr=R.injectEndpoints({endpoints:e=>({getSome:e.query({query:()=>({url:"/protected",method:"GET"})})})}),{useGetSomeQuery:cr}=lr,dr=()=>{const e=cr({});return pt({...e}),t.jsx(an,{children:t.jsx(ct,{...e,children:t.jsx("div",{className:"parent__page txt__col",children:t.jsx("div",{className:"w-full flex justify-center",children:t.jsx("span",{className:"txt__6",children:"Protected page"})})})})})},ur=()=>v(P).isLogged?t.jsx(ue,{}):t.jsx(O,{to:"/auth/login",replace:!0}),mr=()=>t.jsx("div",{children:"ProfileSettings"}),pr=()=>t.jsx("div",{children:"ManageAccount"}),fr=()=>{const e=F();return l.useEffect(()=>{Bs(e)},[e]),t.jsxs(os,{children:[t.jsxs(b,{path:"/",element:t.jsx(Mn,{}),children:[t.jsx(b,{index:!0,element:t.jsx(nr,{})}),t.jsxs(b,{path:"auth",element:t.jsx(Dn,{}),children:[t.jsx(b,{path:"register",element:t.jsx(Wn,{})}),t.jsx(b,{path:"login",element:t.jsx(Kn,{})}),t.jsx(b,{path:"verify-account",element:t.jsx(Zn,{})}),t.jsx(b,{path:"forgot-pwd",element:t.jsx(er,{})})]}),t.jsxs(b,{path:"user",element:t.jsx(ur,{}),children:[t.jsx(b,{path:"profile-settings",element:t.jsx(mr,{})}),t.jsx(b,{path:"manage-account",element:t.jsx(pr,{})})]}),t.jsx(b,{path:"notice",element:t.jsx(sr,{})}),t.jsx(b,{path:"verify-cb",element:t.jsx(or,{})}),t.jsx(b,{path:"protected",element:t.jsx(dr,{})})]}),t.jsx(b,{path:"*",element:t.jsx(O,{to:"/",replace:!0})})]})},xr=e=>(he(),L("logout expired"),e.dispatch(C.actions.setPushedOut(!0)),e.dispatch(W.actions.openToast({msg:"logout successful",type:_.OK,statusCode:200})),e.dispatch(C.actions.setLoggingOut(!0)),e.dispatch(C.actions.logout()),ge("/",{replace:!0}),null),hr=(e,s)=>[...Object.values(Y).filter(n=>n!==Y.REFRESH_EXPIRED)].includes(e==null?void 0:e.msg)?Vs(e==null?void 0:e.msg):(e==null?void 0:e.msg)===Y.REFRESH_EXPIRED||s||xe(N.ACCESS)?"session expired":(e==null?void 0:e.message)||"The AI that manage the database has revolted and is taking control of all servers ⚙️",gr=({store:e,response:s})=>{const{data:n,status:a}=s,i=e.getState().auth.isLogged;return e.getState().auth.pushedOut||(he(),e.dispatch(W.actions.openToast({msg:hr(n,i),type:_.ERR,statusCode:a})),e.dispatch(C.actions.setPushedOut(!0)),e.dispatch(C.actions.logout()),ge("/auth/login",{replace:!0})),null},_r=({store:e,response:s})=>{const{data:n,status:a}=s,i=fe(n),r={notice:i,type:_.ERR};return e.dispatch(ve.actions.setNotice({...r})),M({data:r,key:N.NOTICE}),e.dispatch(W.actions.openToast({type:_.ERR,msg:i,statusCode:a})),ge("/notice",{replace:!0,state:{from:q.GEN}}),null},jr=e=>s=>n=>{const{payload:a}=n,i=e.getState().auth.isLogged;if(a!=null&&a.refreshed&&(i||e.dispatch(C.actions.login())),ts(n)){const{response:r}=a??{},{status:o,data:c,config:d}=r??{};return o===401&&(c!=null&&c.loggingOut)?xr(e):o===401&&pe(d==null?void 0:d.url)?gr({store:e,response:r}):[403,429].includes(o)&&_r({store:e,response:r}),s(n)}return s(n)},br=ss({reducer:{appAPI:R.reducer,sidebar:Be.reducer,auth:C.reducer,toast:W.reducer,notice:ve.reducer},middleware:e=>e().concat(R.middleware).concat(jr)});yt.createRoot(document.getElementById("root")).render(t.jsx(l.StrictMode,{children:t.jsx(Jt,{store:br,children:t.jsx(ls,{children:t.jsx(fr,{})})})}));
