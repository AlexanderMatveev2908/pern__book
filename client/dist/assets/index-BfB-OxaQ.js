import{r as l,j as s}from"./react-DOKUib4L.js";import{c as Ns}from"./react-dom-BvBpDugK.js";import{L as Ss,M as Es,F as Cs,a as Ls,b as Rs,c as Ps,T as Os,d as ks,e as As,G as Is,f as Ts,g as $e,h as Fe,R as $s,i as Fs,I as Ms,j as Ds,k as Bs,B as zs,l as Us,m as Vs,n as qs,o as Gs,p as Ws,q as Hs,r as Xs,s as Ys,t as Ks,u as Qs,v as Me,w as De,x as Zs,y as Js}from"./react-icons-1fvaokPF.js";import{a as v,c as S,P as et}from"./react-redux-C2QVzL3I.js";import{c as K,a as st,i as tt,b as nt}from"./@reduxjs-BqbeDH-U.js";import{v as h}from"./uuid-C6aID195.js";import{S as rt,L as Be}from"./lucide-react-DimlRIsM.js";import{z as y}from"./zod-mSkvzYyn.js";import{a as at}from"./axios-t--hEgTQ.js";import{d as it}from"./styled-components-D_5_OTnU.js";import{L as U,u as ue,N as T,a as $,b as ot,O as me,c as lt,R as ct,d as w,B as dt}from"./react-router-BpgcbLad.js";import{u as Q}from"./react-hook-form-DUGg7ZhA.js";import{s as Z}from"./@hookform-Bw1q55SB.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./use-sync-external-store-ruIS0Fp4.js";import"./redux-BXkGT1VS.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-utOO-l3Z.js";import"./tslib-CGNu0TuM.js";import"./@emotion-sScrWPmR.js";import"./stylis-DinRj2j6.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const ut={isSideOpen:!1},ze=K({name:"sidebar",initialState:ut,reducers:{setIsSideOpen:(e,t)=>{e.isSideOpen=t.payload},toggleSide:e=>{e.isSideOpen=!e.isSideOpen}}}),{setIsSideOpen:Ee,toggleSide:mt}=ze.actions,Ue=e=>e.sidebar;var I=(e=>(e.REGISTER="/auth/register",e.LOGIN="/auth/login",e.FORGOT_PASSWORD="/auth/forgot-pwd",e.VERIFY_EMAIL="/auth/verify-account",e))(I||{});const J=[{label:"Register",path:"/auth/register",icon:Ss},{label:"Login",path:"/auth/login",icon:Es},{label:"Verify email",path:"/auth/verify-account",icon:Cs},{label:"Recover account",path:"/auth/forgot-pwd",icon:Ls}],Ve=J.find(e=>e.path==="/auth/verify-account"),ee={field:"email",label:"Email",type:"email"},qe=[{field:"firstName",label:"First Name",place:"Your First Name..."},{field:"lastName",label:"Last Name",place:"Your Last Name..."},ee].map(e=>({...e,id:h()})),Ge={field:"password",label:"Password",type:"password"},pt={field:"confirmPassword",label:"Confirm Password",place:"Confirm Your Password...",type:"password"},We=[Ge,pt].map(e=>({...e,id:h()})),ft=[qe.map(e=>e.field),[...We.map(e=>e.field),"terms"]],xt="abcdefghilmopqzwyx".split("").flatMap(e=>[e.toUpperCase(),e]).concat("0123456789".split("")).concat("~!@#$%^&*()_-=+{}[].?,'".split("")),z=[{reg:/(?=.*[A-Z])/,icon:Rs},{reg:/(?=.*[a-z])/,icon:Ps},{reg:/(?=.*\d)/,icon:Os},{reg:/(?=.*[\W_])/,icon:ks},{reg:/.{8,}/,icon:As}].map(e=>({...e,id:h()})),[ht,gt,_t,jt]=J,pe={...ht,msg:"Don't have an' account ?",msgBold:"Register"},wt={...gt,msg:"Already have an' account ?",msgBold:"Login"},He={..._t,msg:"Email did not arrive ?",msgBold:"Send new email"},Xe={...jt,msg:"Forgot password ?",msgBold:"Recover"},bt=[wt,He].map(e=>({...e,id:h()})),vt=[pe,Xe].map(e=>({...e,id:h()})),yt=[pe,He].map(e=>({...e,id:h()})),Nt=[pe,Xe].map(e=>({...e,id:h()})),St=[{label:"Home",path:"/",icon:Is},{label:"Books",path:"to-do",icon:Ts}].map(e=>({...e,id:h()})),Et={label:"Account",icon:$s},Ct=[...J].map(e=>({...e,id:h()})),Lt={label:"My Account",icon:rt},Rt=[{label:"Profile settings",path:"/user/profile-settings",icon:$e},Ve,{label:"Manage Account",path:"/user/manage-account",icon:Fe}].map(e=>({...e,id:h()})),Pt=[{label:"Source code",url:"https://github.com/AlexanderMatveev2908/PERN__BOOK",icon:Fs},{label:"MERN Food App",url:"https://food-app-aqkc.onrender.com",icon:Ms},{label:"MERN Booking App",url:"https://mern-booking-app-0w8v.onrender.com",icon:Ds},{label:"React X0",url:"https://react-x0.onrender.com",icon:Bs},{label:"React Calculator",url:"https://react-calculator-imc7.onrender.com",icon:zs},{label:"REACT Form",url:"https://react-form-ytsc.onrender.com",icon:Us}].map(e=>({...e,id:h()})),Ot=J.map(e=>({...e,id:h()})),kt=[{label:"Profile settings",path:"/user/profile-settings",icon:$e},Ve,{label:"Manage Account",path:"/user/manage-account",icon:Fe}].map(e=>({...e,id:h()})),P={sm:640,md:768,lg:1024,xl:1280},fe=(e,t)=>!Object.keys(e??{}).length&&Object.values(t??{}).every(n=>{var a;return typeof n=="string"?!!((a=n==null?void 0:n.trim())!=null&&a.length):typeof n=="boolean"?n:Array.isArray(n)?n==null?void 0:n.length:n}),At=(e,t)=>{var i;let n=!0,a=t.length-1;do{const r=t[a];if((i=e[r])!=null&&i.message){n=!1;break}a--}while(a>=0);return n},It=(e,t)=>Math.random()*(t-e)+e,Tt=e=>{let t=e.length-1;do{const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]],t--}while(t>0);return e},$t=/^\/[/]*$/,Ce=/^[a-zA-ZÀ-ÿ`'-\s]+$/,Ye=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_])[A-Za-zÀ-ÿ\d\W_]{8,}$/,se=()=>({email:y.string().min(1,"Email is required").max(50,"Email too long").email("Invalid Email Format")}),Ke=()=>({password:y.string().min(1,"Password is required").max(30,"Password too long").regex(Ye,"Invalid password format").nullable()}),Ft={...se(),...Ke()},Mt=y.object({firstName:y.string().min(1,"First Name is required").max(30,"First Name must be less than 30 characters").regex(Ce,"Invalid First Name format"),lastName:y.string().min(1,"Last Name is required").max(30,"First Name must be less than 30 characters").regex(Ce,"Invalid Last Name format"),...se(),...Ke(),confirmPassword:y.string().min(1,"You must confirm your password"),terms:y.boolean().nullable()}).refine(e=>e.firstName.trim(),{message:"First Name is required",path:["firstName"]}).refine(e=>e.lastName.trim(),{message:"First Name is required",path:["lastName"]}).refine(e=>e.confirmPassword===e.password,{message:"Passwords don't match",path:["confirmPassword"]}).refine(e=>e.email!==e.password,{message:"Email and Password must be different",path:["password"]}).refine(e=>e.terms,{message:"You must accept the terms",path:["terms"]});var Qe=(e=>(e.ACCESS_EXPIRED="ACCESS_EXPIRED",e.ACCESS_INVALID="ACCESS_INVALID",e.ACCESS_NOT_PROVIDED="ACCESS_NOT_PROVIDED",e))(Qe||{}),X=(e=>(e.REFRESH_NOT_EMITTED="REFRESH_NOT_EMITTED ",e.REFRESH_EXPIRED="REFRESH_EXPIRED ",e.REFRESH_INVALID="REFRESH_INVALID ",e.REFRESH_NOT_PROVIDED="REFRESH_NOT_PROVIDED ",e))(X||{}),j=(e=>(e.OK="SUCCESS",e.ERR="ERROR",e.INFO="INFO",e))(j||{}),V=(e=>(e.REGISTER=",g1&L'(8Oiw%Dfhz",e.FORGOT_PWD=",GG?$4]GYw_fIdmX",e.VERIFY_ACCOUNT="%1~#+8oM7I3fOe3f",e.EXP="X+=8'clYoWq0y*,q",e.GEN="E9]A]X0O)&{x]2zQ",e))(V||{}),Ze=(e=>(e.LOGOUT="/auth/logout",e))(Ze||{}),te=(e=>(e.USER="USER",e))(te||{}),N=(e=>(e.ACCESS="accessToken",e.NOTICE="notice",e.INIT="init",e))(N||{});const Je=e=>[...Object.values(Qe)].includes(e),xe=e=>e==="/refresh",Dt=e=>e===Ze.LOGOUT,Bt=e=>{const{data:t,status:n,config:a}=e;return Je(t==null?void 0:t.msg)||xe(a==null?void 0:a.url)||[403,429].includes(n)},es=(e,t)=>(e==null?void 0:e[t])??null,he=e=>(e==null?void 0:e.msg)||(e==null?void 0:e.message)||"The AI that manage the database has revolted and is taking control of all servers ⚙️",zt=e=>!e.isLogged&&!e.loggingOut&&!e.pushedOut,F=({data:e,key:t})=>{if(e==null)throw new Error("Invalid storage data");sessionStorage.setItem(t,typeof e!="object"?e:JSON.stringify(e))},ge=e=>sessionStorage.getItem(e),_e=()=>{sessionStorage.clear()},ne=(e,t)=>!!Object.keys(e??{}).length&&Object.values(e??{}).every(n=>n||n!==void 0),L=(e,...t)=>{var d,m;const c=(((((m=(((d=new Error().stack)==null?void 0:d.split(`
`))??[])[2])==null?void 0:m.trim())||"unknown caller").split(" ").pop()||"unknown path").split("/").pop()||"unknown path").split(".").shift();console.group(e.toUpperCase()),console.log(c);for(const u of t)console.log(u);console.groupEnd()};let ce=null;const Ut=e=>ce=e,je=(e,t)=>ce?ce(e,t):null,Vt=e=>Object.values(V).includes(e),qt=e=>`We've sent you an email ${e}. If you don't see it, check your spam folder, it might be partying there 🎉`,Gt=e=>e.split("_").join(" "),E=at.create({baseURL:"http://localhost:3000/api/v1",withCredentials:!0});E.interceptors.request.use(e=>{const t=sessionStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));const Wt={isLogged:!!sessionStorage.getItem("accessToken"),loggingOut:!1,pushedOut:!1},M=K({name:"auth",initialState:Wt,reducers:{login:e=>{e.isLogged=!0},logout:e=>{e.isLogged=!1},setLoggingOut:e=>{e.loggingOut=!0,e.isLogged=!1},setPushedOut:e=>{e.pushedOut=!0,e.isLogged=!1},clearNavigating:e=>{e.pushedOut=!1,e.loggingOut=!1}}}),{login:Ht,logout:Xt,setLoggingOut:Yt,setPushedOut:Gr,clearNavigating:ss}=M.actions,O=e=>e.auth,Kt=async({url:e,method:t,data:n,params:a})=>{var i;try{const r=await E({url:e,method:t,data:n,params:a});return{data:{...r==null?void 0:r.data,status:r==null?void 0:r.status}}}catch(r){L("err axios",r);const{response:{data:o,config:c,status:d}={}}=r??{},m=xe(c==null?void 0:c.url),u=Dt(c==null?void 0:c.url),f=Je(o==null?void 0:o.msg),g=d!==401||m||!f||u;if(u&&(E.defaults.headers.common.Authorization=null),g)return{error:{...r,response:{...r==null?void 0:r.response,data:{...(i=r==null?void 0:r.response)==null?void 0:i.data,loggingOut:u}}}};try{const{data:x}=await E.post("/refresh");F({data:x.accessToken,key:N.ACCESS}),E.defaults.headers.common.Authorization=`Bearer ${x.accessStorage}`;const p=await E({url:e,method:t,data:x,params:a});return L("refresh success",p),{data:{...p==null?void 0:p.data,status:p==null?void 0:p.status,refreshed:!0}}}catch(x){return L("refresh failed",x),E.defaults.headers.common.Authorization=null,{error:x}}}},C=st({baseQuery:Kt,tagTypes:[te.USER],reducerPath:"appAPI",endpoints:()=>({})}),de=async({queryFulfilled:e,dispatch:t})=>{const{data:n}=await e;F({data:n.accessToken,key:N.ACCESS}),E.defaults.headers.common.Authorization=`Bearer ${n==null?void 0:n.accessToken}`,t(M.actions.login()),t(C.util.invalidateTags([te.USER]))},Le=()=>It(-1200,1200),re=({isAging:e,isPending:t,label:n,type:a="submit",Icon:i,isDisabled:r})=>{const[o,c]=l.useState(!1),d=l.useRef(null),m=l.useRef(null),[u]=l.useState(Array.from({length:30},()=>h()));return l.useEffect(()=>{const f=g=>{if(m.current&&m.current.contains(g.target)){let x=0;do{const p=document.getElementById(u[x]);if(!p){x++;continue}p.classList.remove("el__bubble"),requestAnimationFrame(()=>p.classList.add("el__bubble")),x++}while(x<u.length)}};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[u]),l.useEffect(()=>(e&&(d.current=setTimeout(()=>{c(!0)},250)),()=>{d.current&&(d.current=null)}),[e]),l.useEffect(()=>{e||c(!1)},[e]),o?s.jsx("div",{className:"w-full flex justify-center",children:s.jsx(ns,{})}):s.jsxs("button",{type:a,ref:m,disabled:r||t,className:"appearance-none w-full el__border_sm py-2 px-10 flex justify-center items-center disabled:opacity-50 btn__container",children:[u.map((f,g)=>s.jsx("div",{id:f,className:`absolute bottom-1/2 rounded-full pointer-events-none ${g%2===0?"w-[8px] h-[8px] border-2 border-blue-600":"h-[5px] w-[5px] bg-blue-600"} `,style:{left:"50%",top:"50%",translate:"-50% -50%","--pos":`${Le()}%, ${Le()}%`,transform:"scale(0)",opacity:"0"}},f)),s.jsxs("div",{className:"w-full flex justify-center items-center gap-5",children:[i&&s.jsx(i,{className:"icon__sm"}),s.jsx("span",{className:"txt__3",children:t?"Pending...":n})]})]})},Qt=({isDropOpen:e,setIsDropOpen:t,el:n})=>s.jsxs("div",{onClick:()=>t(!e),className:"w-full grid grid-cols-[1fr_50px] group cursor-pointer",children:[s.jsxs("div",{className:"w-fit flex gap-5 justify-start items-center",children:[s.jsx(n.icon,{className:"icon__md icon__with_txt"}),s.jsx("span",{className:"txt__2 group-hover:text-blue-600 el__flow",children:n.label})]}),s.jsx(Vs,{className:`icon__md icon__with_txt justify-self-end ${e?"rotate-180":""} `})]}),ts=()=>s.jsx("div",{className:"w-[35px] h-[35px] border-[4px] border-blue-600 border-r-transparent border-b-transparent rounded-full el__mini_spinner"}),ns=()=>{const[e]=l.useState(Array.from({length:4},()=>h()));return s.jsx("div",{className:"flex  gap-[15px] items-center",children:e.map((t,n)=>s.jsx("div",{id:t,className:"min-w-[35px] min-h-[35px] bg-blue-600 rounded-full el__spinner_btn",style:{"--delay_spinner_btn":n*.25+"s"}}))})},Zt=()=>{const[e,t]=l.useState(Array.from({length:window.innerWidth<P.sm?10:15},()=>h()));return l.useEffect(()=>{const n=()=>{t(Array.from({length:window.innerWidth<P.sm?10:15},()=>h()))};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),s.jsx("div",{className:"center_abs",children:s.jsx("div",{className:"relative",children:e.map((n,a)=>s.jsx("div",{className:"el__spinner_page_in center_abs",style:{"--start__scale":`${(a||1)/e.length}`,rotate:`${360/e.length*a}deg`,"--delay_page":`${a*1/e.length}s`}},n))})})},Jt=({txt:e})=>{const t=l.useRef(null),n=l.useRef(null);l.useEffect(()=>{const i=r=>{t.current&&n.current&&t.current.contains(r.target)&&(n.current.classList.remove("el__tooltip"),requestAnimationFrame(()=>{var o;return(o=n==null?void 0:n.current)==null?void 0:o.classList.add("el__tooltip")}))};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const a=async()=>{try{await navigator.clipboard.writeText(e)}catch{}};return s.jsxs("button",{onClick:a,type:"button",ref:t,className:"relative w-full flex justify-start",children:[e&&s.jsx("div",{className:"el__cpy_txt appearance-none el__border_sm py-1 px-5 cursor-pointer",children:s.jsx("span",{className:"txt__2",children:e})}),s.jsx("div",{ref:n,className:"absolute el__border_sm -top-[120%] py-1 px-5 z-60 bg-[#000] left-0 min-w-[200px] flex justify-center tooltip pointer-events-none",style:{opacity:"0",transform:"translateY(50px)"},children:s.jsx("span",{className:"txt__1",children:"Copied to clipboard"})})]})},rs=({classCSS:e})=>s.jsx("div",{className:"w-fit h-fit",children:s.jsx(qs,{className:`text-red-600 ${e}`})}),en=it.main`
  display: flex;
  color: ${({color:e})=>e};
  .el__ {
  }
`,sn=()=>s.jsx(en,{color:"red",children:s.jsx(U,{to:"/protected",className:"txt__4",children:"PROTECTED"})}),we=({title:e,customStyle:t})=>s.jsx("div",{className:"w-full flex justify-center txt__col",children:s.jsx("h1",{className:`${t??"txt__5"}`,children:e})}),tn=()=>{const e=ue().pathname,t=I.LOGIN===e?vt:I.REGISTER===e?bt:I.FORGOT_PASSWORD===e?yt:Nt;return s.jsx("div",{className:"w-full txt__col grid gap-y-5 md:grid-cols-2 justify-items-center",children:t.map(n=>s.jsxs("div",{className:"w-fit flex items-center justify-start gap-5  group",children:[s.jsx(n.icon,{className:"icon__sm"}),s.jsxs("div",{className:"w-full flex items-center gap-3",children:[s.jsx("span",{className:"txt__1",children:n.msg}),s.jsx(U,{to:n.path,className:"txt__2 el__flow hover:text-blue-600 el__after_below",children:n.msgBold})]})]},n.id))})},ae=({children:e,title:t,canStay:n})=>v(O).isLogged&&!n?s.jsx(T,{to:"/",replace:!0}):s.jsxs("div",{className:"parent__page",children:[s.jsx(we,{title:t}),e,s.jsx(tn,{})]}),as=(e,t)=>{var r;const[n,a]=l.useState(null),i=(r=e==null?void 0:e[t])==null?void 0:r.message;return l.useEffect(()=>{i&&!n&&a(i)},[i,n,e]),{prevErr:n}},is=({errors:e,el:t})=>{var a,i;const{prevErr:n}=as(e,t.field);return s.jsx("div",{className:`absolute -top-[75%] right-0 transition-all pointer-events-none duration-300 text-red-600 border-2 border-red-600 rounded-xl py-1 px-5 bg-[#000] z-40 ${(a=e[t.field])!=null&&a.message?"translate-y-0 opacity-100":"translate-y-[200%] opacity-0"}`,children:s.jsx("span",{className:"txt__1",children:((i=e[t.field])==null?void 0:i.message)??n})})},be=({el:e,register:t,errors:n,isPwd:a,handleClick:i,setFocus:r})=>s.jsx("div",{className:"w-full grid",children:s.jsxs("label",{className:"grid w-full gap-2 relative",children:[s.jsx("span",{className:"txt__2",children:e.label}),s.jsxs("div",{className:"w-full flex relative",children:[s.jsx("input",{type:a?"password":"text",placeholder:e.place??`Your ${e.label}...`,className:"input__icon txt__2",...t(e.field),onFocus:()=>r==null?void 0:r(!0),onBlur:()=>{r==null||r(!1)},autoComplete:"off"}),s.jsx("button",{onClick:i,type:"button",className:"absolute top-1/2 -translate-y-1/2 right-[20px] btn__pwd",children:a?s.jsx(Gs,{className:"icon__sm"}):s.jsx(Ws,{className:"icon__sm"})}),s.jsx(is,{errors:n,el:e})]})]})}),os=({register:e,errors:t,el:n,customSTyle:a})=>s.jsxs("div",{className:"w-full relative",children:[s.jsx("input",{type:n.type??"text",placeholder:n.place??`Your ${n.label}...`,className:`${a??"input__base"} txt__2`,...e(n.field)}),s.jsx(is,{errors:t,el:n})]}),ve=({el:e,register:t,errors:n})=>s.jsx("div",{className:"w-full grid",children:s.jsxs("label",{className:"grid w-full gap-2 relative",children:[s.jsx("span",{className:"txt__2",children:e.label}),s.jsx(os,{el:e,register:t,errors:n})]})}),nn=({children:e,min:t})=>s.jsx("div",{className:"max-w-full justify-items-center gap-y-5",style:{display:"grid",gridTemplateColumns:`repeat(auto-fit, minmax(${t}px, 1fr))`},children:e}),rn=({pwd:e,focus:t})=>{const n=l.useMemo(()=>z.reduce((o,c)=>o&&c.reg.test(e??""),!0),[e]),a=l.useCallback((o,c)=>typeof o=="object"?"text-blue-600 border-blue-600":c.reg.test(o)?"text-green-600 border-border-green-600":"text-red-600 border-red-600",[]),i=z.slice(0,z.length-1),r=z.slice(z.length-1)[0];return s.jsxs("div",{className:`w-full grid sm:grid-cols-[1fr_100px] gap-y-5 absolute border-2 border-blue-600 z-60 bg-[#000] p-3 rounded-xl left-0 top-[120%] pointer-events-none el__flow ${t&&!n?"":"translate-y-full opacity-0"}`,children:[s.jsx(nn,{min:50,children:i.map(o=>s.jsx("div",{className:`border-2 rounded-xl p-2 el__flow flex items-center gap-5 justify-center ${a(e,o)}`,children:s.jsx(o.icon,{className:"icon__sm"})},o.id))}),s.jsx("div",{className:"w-full flex justify-center h-fit",children:s.jsxs("div",{className:`border-2 rounded-xl p-2 el__flow flex items-center gap-5 justify-center ${a(e,r)}`,children:[s.jsx(r.icon,{className:"icon__sm"}),s.jsxs("div",{className:"w-full flex gap-2",children:[s.jsx("span",{className:"txt__2",children:(e==null?void 0:e.length)??0}),s.jsx("span",{className:"txt__2",children:"/"}),s.jsx("span",{className:"txt__2",children:"8"})]})]})})]})},an=({register:e,errors:t,mainPwd:n,pwd:a,el:i})=>{const[r,o]=l.useState(!1);return s.jsxs("div",{className:"w-full relative",children:[s.jsx(be,{el:i,register:e,errors:t,...n,setFocus:o}),s.jsx(rn,{pwd:a,focus:r})]})},on=({currForm:e,totLen:t})=>{const[n]=l.useState(Array.from({length:t},()=>h()));return s.jsx("div",{className:"w-full grid max-w-[600px]",children:s.jsxs("div",{className:"w-full relative flex justify-between",children:[s.jsx("div",{className:`absolute border-[3px] border-blue-600 top-1/4\r
        left-0 w-full z-10 h-[25px] rounded-full transition-all duration-500`}),s.jsx("div",{className:`absolute border-[3px] border-blue-600 bg-blue-600 top-1/4
        left-0 w-full z-10 h-[25px] rounded-full transition-all duration-500`,style:{width:`${100/t*(e+1)}%`}}),n.map((a,i)=>s.jsx("div",{className:"w-full flex z-30 justify-end",children:s.jsx("div",{className:`border-[3px]  rounded-full h-[45px] w-[45px] flex justify-center items-center transition-all duration-500 txt__col ${i===e?"scale-[1.35]":""} ${e>=i?"bg-blue-600 border-[whitesmoke]":"border-blue-600 bg-neutral-950"}`,children:i+1===t?s.jsx(Hs,{className:"min-w-[25px] min-h-[25px]"}):s.jsx("span",{className:`${i===e?"txt__4":"txt__3"}`,children:i+1})})},a))]})})},ln=()=>{const[e,t]=l.useState(""),n=i=>{let c=0;const d=new Uint8Array(16);let m="";for(;!Ye.test(m)&&c<100;){window.crypto.getRandomValues(d);const u=[];let f=15;do{const g=d[f]%i.length;u[f]=i[g],f--}while(f>=0);m=u.join(""),c++}return c<100?m:""},a=()=>{const i=Tt(xt),r=n(i);t(r)};return s.jsxs("div",{className:"w-full grid gap-y-3 sm:grid-cols-2",children:[s.jsxs("button",{type:"button",onClick:a,className:"w-fit flex items-center justify-start gap-5 cursor-pointer el__after_below el__flow hover:text-blue-600 appearance-none",children:[s.jsx(Xs,{className:"icon__md"}),s.jsx("span",{className:"txt__2",children:"Generate password"})]}),s.jsx(Jt,{txt:e})]})},ls=({register:e,errors:t,handleSave:n,isFormOk:a})=>s.jsx("div",{className:"parent__form",children:s.jsx("form",{onSubmit:n,className:"form__content",children:s.jsxs("div",{className:"w-full grid gap-5 p-6",children:[s.jsx(ve,{register:e,errors:t,el:ee}),s.jsx("div",{className:"max-w-[250px] w-full justify-self-center mt-10",children:s.jsx(re,{label:"Login",isDisabled:!a,isPending:!1})})]})})}),cs=({canStay:e=!0,isLoading:t=!1,isError:n=!1,push:a=!1,error:i=null,children:r=null})=>{const{response:{data:o,status:c}={}}=i??{};return e?t?s.jsx("div",{className:"min-h-[100vh] relative -mt-[50px]",children:s.jsx(Zt,{})}):n?a?s.jsx(T,{to:"/",replace:!0}):s.jsxs("div",{className:"grid justify-items-center items-start gap-[25px] txt__col",children:[s.jsxs("div",{className:"h-fit flex items-center gap-5",children:[s.jsx("span",{className:"txt__6",children:c}),s.jsx("span",{className:"txt__4 leading-[35px] tracking-wider",children:he(o)})]}),s.jsx(rs,{classCSS:"icon__notice_md"})]}):r:s.jsx(T,{to:"/",replace:!0})},ds=({children:e})=>{const t=v(O);return zt(t)?s.jsx(T,{to:"/auth/login",replace:!0}):e},k=()=>{l.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[])},us=()=>{const[e,t]=l.useState(!0),[n,a]=l.useState(!0);return{mainPwd:{isPwd:e,handleClick:()=>{n||a(!0),t(c=>!c)}},confirmPwd:{isPwd:n,handleClick:()=>{e||t(!0),a(c=>!c)}},closeAllPwd:()=>{t(!0),a(!0)}}},cn={isToastPrev:!1,isToast:!1,toast:null},q=K({name:"toast",initialState:cn,reducers:{openToast:(e,t)=>{e.isToastPrev=e.isToast,e.isToast=!0,e.toast=t.payload},closeToast:e=>{e.isToastPrev=!1,e.isToast=!1},reopenToast:e=>{e.isToastPrev=!1,e.isToast=!0}}}),{openToast:ye,closeToast:Re,reopenToast:dn}=q.actions,un=e=>e.toast,Pe=ge(N.NOTICE),mn=Pe?{...JSON.parse(Pe),cb:null}:{notice:"",type:j.OK,cb:null},Ne=K({name:"notice",initialState:mn,reducers:{setNotice:(e,t)=>t.payload}}),{setNotice:ms}=Ne.actions,pn=e=>e.notice,ps=()=>{const e=$(),t=S();return{handleErrAPI:l.useCallback(({err:a,push:i,pushNotice:r})=>{const{response:o}=a??{},{data:c,status:d}=o??{};if(Bt(o))return null;const m=he(c);if(t(ye({type:j.ERR,msg:m,statusCode:d})),i&&r)throw new Error("Can not send user to different places at same time");return i?e("/",{replace:!0}):r!=null&&r[0]&&(t(ms({notice:m,type:j.ERR,cb:(r==null?void 0:r[1])??null})),F({data:{notice:c==null?void 0:c.msg,type:j.ERR},key:N.NOTICE}),e("/notice",{replace:!0,state:{from:V.GEN}})),null},[t,e])}},ie=()=>{const e=S(),{handleErrAPI:t}=ps();return{wrapMutationAPI:l.useCallback(async({cbAPI:a,push:i,pushNotice:r})=>{try{const o=await a().unwrap();return L("mutation api",o),e(ye({type:j.OK,msg:(o==null?void 0:o.msg)||"operation successful",statusCode:o==null?void 0:o.status})),o}catch(o){return L("err mutation",o),t({err:o,push:i,pushNotice:r})}},[t,e])}},fn=({cb:e,alias:t})=>{const n=l.useCallback(()=>e(),[e]);return{[`${t}Cb`]:n}},fs=({isSuccess:e,toast:t,data:n,isError:a,error:i,push:r,pushNotice:o,...c})=>{const d=S(),{handleErrAPI:m}=ps(),u=l.useCallback(async({isSuccess:f,toast:g,data:x,isError:p,error:_,push:G,pushNotice:oe})=>{if(f)L("query api",x),g&&d(ye({type:j.OK,msg:(x==null?void 0:x.msg)||"operation successful",statusCode:x==null?void 0:x.status}));else if(p)return L("err query",_),m({err:_,push:G,pushNotice:oe})},[m,d]);l.useEffect(()=>{u({isSuccess:e,toast:t,data:n,isError:a,error:i,push:r,pushNotice:o})},[e,t,n,a,i,r,o,u])},xn=C.injectEndpoints({endpoints:e=>({registerUser:e.mutation({query:t=>({url:"/auth/register",method:"POST",data:t}),async onQueryStarted(t,{queryFulfilled:n,dispatch:a}){await de({queryFulfilled:n,dispatch:a})}}),loginUser:e.mutation({query:t=>({url:"/auth/login",method:"POST",data:t}),async onQueryStarted(t,{queryFulfilled:n,dispatch:a}){await de({queryFulfilled:n,dispatch:a})}}),logoutUser:e.mutation({query:()=>({url:"/auth/logout",method:"POST"})})})}),{useRegisterUserMutation:hn,useLogoutUserMutation:gn,useLoginUserMutation:_n}=xn,xs=()=>{const e=$(),[t,{isLoading:n}]=gn({}),a=S(),{wrapMutationAPI:i}=ie();return{handleCLick:l.useCallback(async o=>{const c=await i({cbAPI:()=>t({})});o(),c&&(e("/",{replace:!0}),_e(),E.defaults.headers.common.Authorization=null,a(Yt()),a(Xt()),a(C.util.resetApiState()))},[t,e,i,a]),isLoading:n}},jn=({handleMainClick:e})=>{const{handleCLick:t,isLoading:n}=xs();return s.jsxs("button",{onClick:()=>t(e),className:"items-center justify-start w-full flex gap-5 el__after_below el__flow hover:text-blue-600",children:[n?s.jsx(ts,{}):s.jsx(Be,{className:"icon__sm"}),s.jsx("span",{className:"txt__2",children:"Logout"})]})},H=e=>{if(!(window.innerWidth<P.md))return e()},wn=({isLogged:e,init:t,isVerified:n})=>{const[a,i]=l.useState(!1),[r,o]=l.useState(!1),[c,d]=l.useState(!1),m=l.useRef(null),u=l.useRef(null),f=l.useRef(null);l.useEffect(()=>{const p=_=>{!m.current||!u.current||!m.current.contains(_.target)&&!u.current.contains(_.target)&&i(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),l.useEffect(()=>{(()=>{r&&(f.current=setTimeout(()=>{o(!1)},150))})()},[r]);const g=e?kt:Ot,x=()=>{d(!0),i(p=>!p)};return s.jsxs("div",{className:"min-w-full justify-self-end flex justify-end z__drop_header",children:[s.jsx("div",{className:"relative w-[50px] h-[50px]",children:s.jsxs("div",{ref:u,onMouseEnter:()=>{H(()=>{clearTimeout(f.current),f.current=null,o(!1),i(!0)})},onMouseLeave:()=>{H(()=>i(!1))},className:`absolute top-[125%] bg-[#000] el__border_sm p-3 pb-4 grid gap-3 min-w-[250px] transition-all duration-500   right-[-100%] ${r||a?"":"translate-y-1/3 opacity-0 pointer-events-none"}`,children:[g.map(p=>p.path===I.VERIFY_EMAIL&&n?null:s.jsxs(U,{to:p.path,onClick:()=>i(!1),className:"w-full flex items-center gap-5 el__after_below el__flow hover:text-blue-600",children:[s.jsx(p.icon,{className:"icon__sm"}),s.jsx("span",{className:"txt__2",children:p.label})]},p.id)),e&&s.jsx(jn,{handleMainClick:x})]})}),s.jsx("div",{ref:m,onClick:x,className:"group btn__logic w-[45px] h-[45px] flex justify-center items-center",onMouseEnter:()=>{H(()=>{d(!1),i(!0)})},onMouseLeave:()=>{c||H(()=>{i(!1),o(!0)})},children:e&&t?s.jsx("div",{className:"border-blue-600 rounded-xl flex justify-center items-center border-[3px] p-[7.5px] group-hover:text-blue-600 cursor-pointer el__flow",children:s.jsx("span",{className:"txt__3 group-hover:scale-[1.15] el__flow",children:t})}):s.jsx(Ys,{className:"icon__md icon__logic"})})]})},bn=C.injectEndpoints({endpoints:e=>({getUserProfile:e.query({query:()=>({url:"/user/profile",method:"GET"}),providesTags:[te.USER]}),refreshToken:e.mutation({query:()=>({url:"/refresh",method:"POST"})})})}),{useGetUserProfileQuery:hs}=bn,Oe=e=>(e==null?void 0:e.at(0))??"",vn=()=>{const[e,t]=l.useState(ge(N.INIT)??null),n=S(),a=v(Ue).isSideOpen,{isLogged:i}=v(O),r=hs({});fs({...r});const{data:o,isLoading:c}=r,d=es(o,"user");return l.useEffect(()=>{if(ne(d)&&!e){const m=Oe(d==null?void 0:d.firstName)+Oe(d==null?void 0:d.lastName);t(m),F({data:m,key:N.INIT})}},[e,d]),s.jsx("div",{className:"w-full border-b-[3px] border-blue-600 sticky top-0 h-[80px] z__header bg-[#000]",children:s.jsxs("div",{className:"w-full h-full items-center grid grid-cols-2 pl-3 pr-4 sm:pr-8",children:[s.jsx(U,{to:"/",className:"txt__6 text-blue-600 w-fit",children:"PERN__BOOK"}),s.jsxs("div",{className:"w-full flex justify-end gap-4 txt__col items-center",children:[c&&!e?s.jsx(ts,{}):s.jsx(wn,{isLogged:i,isLoading:c,init:e,isVerified:d==null?void 0:d.isVerified}),s.jsx("button",{onClick:()=>n(mt()),className:"justify-self-end",children:a?s.jsx(Ks,{className:"icon__close"}):s.jsx(Qs,{className:"icon__lg icon__logic"})})]})]})})},gs=({el:e,handleSideClick:t})=>s.jsxs(ot,{onClick:t,to:e.path,className:"w-fit flex justify-start gap-5 group el__after_below items-center nav_link",children:[s.jsx(e.icon,{className:"icon__with_txt icon__md"}),s.jsx("span",{className:"txt__2 el__flow group-hover:text-blue-600",children:e.label})]}),yn=({email:e})=>s.jsx("div",{className:"w-full sticky top-0 flex items-center h-[65px] border-b-[3px] border-blue-600 overflow-x-auto scrollbar__app scrollbar__x z-60 bg-[#000]",children:s.jsx("div",{className:"max-w-full flex justify-start px-5 ",children:s.jsx("span",{className:"txt__3 max-w-full text-nowrap",children:e})})}),Nn=({handleSideClick:e,user:t})=>{const[n,a]=l.useState(!1),i=v(O),r=i.isLogged?Rt:Ct,o=i.isLogged?Lt:Et;return s.jsxs("div",{className:"w-full grid ",children:[s.jsx(Qt,{isDropOpen:n,setIsDropOpen:a,el:o}),s.jsx("div",{className:`w-full grid el__flow ${n?"max-h-[500px] opacity-100":"max-h-0 opacity-0 pointer-events-none"} `,children:s.jsx("div",{className:`grid gap-5 el__flow  ${n?"pt-5":"-translate-y-[50px]"}`,children:r.map(c=>c.path===I.VERIFY_EMAIL&&(t!=null&&t.isVerified)?null:s.jsx(gs,{el:c,handleSideClick:e},c.id))})})]})},Sn=({handleSideClick:e})=>{const{handleCLick:t,isLoading:n}=xs();return n?s.jsx("div",{className:"flex justify-start mt-6",children:s.jsx(ns,{})}):s.jsxs("button",{onClick:()=>t(e),className:"w-fit flex justify-start gap-5 group el__after_below items-center",children:[s.jsx(Be,{className:"icon__md icon__with_txt"}),s.jsx("span",{className:"txt__2 el__flow group-hover:text-blue-600",children:"Logout"})]})},En=()=>{const e=l.useRef(null),[t,n]=l.useState(null),i=v(O).isLogged,r=S(),o=v(Ue).isSideOpen,{data:c}=hs({})??{},d=es(c,"user");l.useEffect(()=>{ne(d)&&n(d.email)},[d]),l.useEffect(()=>{const u=f=>{e.current&&!e.current.contains(f.target)&&r(Ee(!1))};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[r]);const m=()=>r(Ee(!1));return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`w-full z__sidebar_bg inset-0 bg-black/50 ${o?"fixed":"hidden"}`}),s.jsx("div",{ref:e,className:`fixed top-[80px] bottom-0 right-0 w-[300px] sm:w-[500px] bg-[#000]  border-l-[3px] border-blue-600 transition-all duration-500 z__sidebar txt__col overflow-y-auto scrollbar__y scrollbar__app ${o?"opacity-100":"opacity-0 translate-x-full"} `,children:s.jsxs("div",{className:"max-w-full relative grid gap-4",children:[typeof t=="string"&&i&&s.jsx(yn,{email:t}),s.jsxs("div",{className:`grid gap-5 px-5 ${i?"":"pt-5"}`,children:[St.map(u=>s.jsx(gs,{el:u,handleSideClick:m},u.id)),s.jsx(Nn,{handleSideClick:m,user:d}),s.jsx(Sn,{handleSideClick:m})]})]})})]})},Cn="/assets/1-CdRvRdCC.avif",Ln="/assets/2-B834IbOU.avif",Rn="/assets/3-CCwT6JH8.avif",Pn="/assets/4-Bo6LHwuz.avif",On="/assets/5-BOqO4lNR.avif",Y=[Cn,Ln,Rn,Pn,On].flatMap(e=>[{src:e,id:h()},{src:e,id:h()}]),kn="_btn__hero_1o4mu_2",ke={btn__hero:kn},Ae=()=>window.innerWidth>=P.lg?350:window.innerWidth>=P.md?300:200,Ie=()=>window.innerWidth>P.xl?Y.length-2:window.innerWidth>P.sm?Y.length-1:Y.length,An=()=>{const[e,t]=l.useState(0),[n,a]=l.useState(Ae()),[i,r]=l.useState(Ie()),o=l.useRef(!1);l.useEffect(()=>{const u=()=>{a(Ae()),r(Ie())};return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const c=()=>{o.current=!0,setTimeout(()=>o.current=!1,1e3)},d=l.useCallback(()=>t(u=>u===i-1?0:u+1),[i]),m=()=>{c(),t(u=>u===0?i-1:u-1)};return l.useEffect(()=>{const u=setInterval(()=>{o.current||d()},1250);return()=>clearInterval(u)},[d]),s.jsx("div",{className:"w-full flex px-10",children:s.jsxs("div",{className:"w-full grid text-[whitesmoke] mt-10 relative",children:[s.jsx("button",{onClick:m,className:`${ke.btn__hero} group -left-[20px]`,children:s.jsx(Me,{className:"icon__md icon__with_txt"})}),s.jsx("div",{className:"w-full flex gap-[25px] overflow-hidden p-5 el__border_md",children:s.jsx("div",{className:"flex gap-[25px] transition-all duration-500",style:{transform:`translateX(-${e*(n+25)}px)`},children:Y.map((u,f)=>s.jsx("div",{className:"rounded-xl overflow-hidden",style:{width:n,height:n},children:s.jsx("img",{src:u.src,alt:`img__${f}`,className:"w-full h-full"})},u.id))})}),s.jsx("button",{onClick:()=>{c(),d()},className:`${ke.btn__hero} -right-[20px] group`,children:s.jsx(De,{className:"icon__md icon__with_txt"})})]})})},In=()=>{var x;const e=l.useRef(null),t=l.useRef(null),n=l.useRef(null),a=l.useRef(!1),i=v(un),{toast:r,isToast:o,isToastPrev:c}=i,d=S(),m=l.useCallback(()=>{e.current.classList.remove("toast__out"),t.current.classList.remove("el__timer_toast"),requestAnimationFrame(()=>{var p,_;(p=e==null?void 0:e.current)==null||p.classList.add("toast__in"),(_=t==null?void 0:t.current)==null||_.classList.add("el__timer_toast")}),n.current=setTimeout(()=>{clearTimeout(n.current),n.current=null,a.current=!0,d(Re())},3e3)},[d]),u=l.useCallback(()=>{var p;a.current=!1,(p=e==null?void 0:e.current)==null||p.classList.remove("toast__in"),t.current.classList.remove("el__timer_toast"),clearTimeout(n.current),n.current=null,requestAnimationFrame(()=>{var _;(_=e==null?void 0:e.current)==null||_.classList.add("toast__out")})},[]),f=l.useCallback(()=>{var p;(p=e==null?void 0:e.current)==null||p.classList.remove("toast__in"),requestAnimationFrame(()=>{var _;(_=e==null?void 0:e.current)==null||_.classList.add("toast__out")}),clearTimeout(n.current),n.current=null,setTimeout(()=>{d(dn())},300)},[d]);l.useEffect(()=>{(()=>{!e||!t||(o&&c?f():o&&!c?m():!o&&a.current&&u())})()},[o,m,u,f,c]),l.useEffect(()=>{},[]);const g=()=>{a.current=!0,d(Re())};return s.jsx("div",{ref:e,className:`z__toast fixed top-5 right-5 border-[3px] bg-[#000] rounded-xl w-fit min-w-[300px] sm:min-w-[450px] max-w-[80vw] sm:max-w-[500px] md:max-w-[600px] el__toast_container overflow-hidden ${(r==null?void 0:r.type)===j.OK?"border-green-600":"border-red-600"}`,style:{transform:"translateX(150%)",opacity:0},children:s.jsxs("div",{className:"w-full grid justify-items-start relative pb-2",children:[s.jsx("div",{className:`w-full flex justify-start pt-[4px] px-8 ${(r==null?void 0:r.type)===j.OK?"text-green-600":"text-red-600"}`,children:s.jsxs("div",{className:"w-full flex items-center gap-3",children:[s.jsx("span",{className:"txt__5",children:(r==null?void 0:r.statusCode)??""}),s.jsx("span",{className:"txt__4",children:r==null?void 0:r.type})]})}),s.jsx("div",{className:`absolute top-0 bottom-0 left-0 min-w-[10px] min-h-[120%] ${(r==null?void 0:r.type)===j.OK?"bg-green-600":"bg-red-600"}`}),s.jsx("button",{onClick:g,className:"appearance-none top-[4px] right-[4px] absolute btn__toast",children:s.jsx(Zs,{className:"icon__md text-red-600"})}),s.jsx("div",{className:"w-full flex justify-start txt__col py-1 px-8",children:s.jsx("span",{className:"txt__3",children:(x=r==null?void 0:r.msg)==null?void 0:x.toUpperCase()})}),s.jsx("div",{ref:t,className:`absolute left-0 bottom-0 h-[3px] ${(r==null?void 0:r.type)===j.OK?"bg-green-600":"bg-red-600"}`,style:{width:"100%"}})]})})},Tn=y.object({...se()}),$n=()=>{const{register:e,formState:{errors:t},handleSubmit:n}=Q({resolver:Z(Tn),mode:"onChange"}),a=n(()=>{});return s.jsxs("div",{className:"w-full grid gap-8 sm:gap-4",children:[s.jsx("div",{className:"justify-self-start",children:s.jsx(we,{title:"Newsletter",customStyle:"txt__4"})}),s.jsxs("form",{onSubmit:a,className:"w-full grid sm:grid-cols-2 gap-5 items-center",children:[s.jsx(os,{register:e,errors:t,el:ee,customSTyle:"input__icon"}),s.jsx("div",{className:"max-w-[200px] justify-self-center sm:justify-self-start",children:s.jsx(re,{label:"Subscribe",type:"submit",isPending:!1,isDisabled:!1})})]})]})},Fn=({el:e})=>s.jsxs("a",{href:e.url,className:"w-fit el__after_below flex items-center gap-5 el__flow hover:text-blue-600",children:[s.jsx(e.icon,{className:"icon__md"}),s.jsx("span",{className:"txt__2",children:e.label})]}),Mn=()=>s.jsxs("div",{className:"w-full border-t-[3px] border-blue-600 grid gap-10 px-5 sm:px-10 pt-5 pb-10 bottom-0 txt__col",children:[s.jsx(U,{to:"/",className:"text-blue-600 w-fit",children:s.jsx("span",{className:"txt__5",children:"LOGO"})}),s.jsx($n,{}),s.jsxs("div",{className:"w-full grid gap-5",children:[s.jsx(we,{title:"Last projects ✌🏼",customStyle:"txt__4"}),s.jsx("div",{className:"gap-5 grid grid-cols-[repeat(auto-fit,_minmax(250px,_1fr))]",children:Pt.map(e=>s.jsx(Fn,{el:e},e.id))})]})]}),Dn=()=>{const e=ue().pathname;return s.jsxs("div",{className:"w-full min-h-screen bg-neutral-950 flex flex-col relative",children:[s.jsx(vn,{}),s.jsx(In,{}),$t.test(e)&&s.jsx(An,{}),s.jsx(En,{}),s.jsx("div",{className:"w-full px-5 sm:px-10 pt-6 pb-[300px] flex justify-center",children:s.jsx(me,{})}),s.jsx(Mn,{})]})},Bn=()=>s.jsx(me,{}),zn="_btn__swapper_7g1io_2",Te={btn__swapper:zn},Un=({currForm:e,setCurrForm:t,totLen:n,children:a,isNextDisabled:i})=>s.jsxs("div",{className:"w-full grid grid-cols-[50px_1fr_50px] items-center",children:[s.jsx("button",{onClick:()=>e&&t(e-1),disabled:!e,className:`justify-self-start ${e?"group":""} ${Te.btn__swapper}`,children:s.jsx(Me,{className:"icon__sm icon__with_txt"})}),e===n-1&&a?s.jsx("div",{className:`w-full justify-center sm:col-span-1 ${e===n-1?"col-span-2 sm:col-span-1":""}`,children:a}):s.jsx("div",{}),e===n-1?null:s.jsx("button",{disabled:i,onClick:()=>e<n-1&&t(e+1),className:`justify-self-end ${i?"":"group"} ${Te.btn__swapper}`,children:s.jsx(De,{className:"icon__sm icon__with_txt"})})]}),Vn="_check__terms_1yd5n_1",qn="_checky_1yd5n_9",le={check__terms:Vn,checky:qn},Gn=({setValue:e,watch:t,errors:n})=>{var o,c;const a=l.useRef(null),{prevErr:i}=as(n,"terms");l.useEffect(()=>{const d=m=>{a.current&&a.current&&a.current.contains(m.target)&&(a.current.classList.remove(le.checky),requestAnimationFrame(()=>{var u;(u=a.current)==null||u.classList.add(le.checky)}))};return document.addEventListener("click",d),()=>document.removeEventListener("click",d)},[]);const r=t("terms");return s.jsxs("div",{className:"w-fit flex items-center justify-start gap-5 relative",children:[s.jsx("div",{onClick:()=>e("terms",!t("terms"),{shouldValidate:!0}),ref:a,className:`min-w-[30px] min-h-[30px] rounded-xl relative el__flow cursor-pointer ${le.check__terms}`,style:{"--check-color":typeof r=="object"?"#2563eb":r?"#16a34a":"#dc2626"},children:s.jsx("div",{className:`absolute border-l-[4px] border-b-[4px] h-5 w-10 border-green-600 -top-[12px] left-0 -rotate-45 transition-all duration-150 delay-75 ${r?"scale-100":"scale-0"}`})}),s.jsx("span",{className:"txt__2",children:"I agree terms and conditions"}),s.jsx("div",{className:`absolute -bottom-[150%] left-0 transition-all duration-300 text-red-600 border-2 border-red-600 rounded-xl py-1 px-5 bg-[#000] z-60 ${(o=n==null?void 0:n.terms)!=null&&o.message?"translate-y-0 opacity-100":"translate-y-[200%] opacity-0"}`,children:((c=n==null?void 0:n.terms)==null?void 0:c.message)||i})]})},Wn=()=>{const[e,t]=l.useState(0),[n,a]=l.useState(!0),i=$(),{mainPwd:r,confirmPwd:o,closeAllPwd:c}=us(),{wrapMutationAPI:d}=ie(),m=S(),{register:u,formState:{errors:f},watch:g,setValue:x,handleSubmit:p,reset:_}=Q({mode:"onChange",resolver:Z(Mt),defaultValues:{firstName:"alex",lastName:"matveev",email:"matveevalexander470@gmail.com",password:"@2}mX_}^]3#lA^w5",confirmPassword:"@2}mX_}^]3#lA^w5",terms:!0}}),[G,{isLoading:oe}]=hn(),{registerCb:js}=fn({cb:()=>m(Ht()),alias:"register"}),ws=p(async b=>{const{confirmPassword:D,terms:B,...W}=b,A=await d({cbAPI:()=>G(W)});if(!ne(A))return;_();const Se={notice:qt("to verify your account"),type:j.OK};F({data:Se,key:N.NOTICE}),m(ms({...Se,cb:js})),i("/notice",{replace:!0,state:{from:V.REGISTER}})}),R=g(),bs=l.useMemo(()=>fe(f,R),[f,R]);l.useEffect(()=>{(()=>{var W;const D=ft[e];let B=At(f,D);if(B){for(const A in R)if(D.includes(A)&&(typeof R[A]=="string"?!((W=R[A])!=null&&W.trim()):!R[A])){B=!1;break}}!B&&!n?a(!0):B&&n&&a(!1)})()},[e,f,n,R]);const vs=l.useCallback(b=>{c(),t(b)},[c]),ys=g("password");return s.jsxs("div",{className:"parent__form",children:[s.jsx(on,{currForm:e,totLen:2}),s.jsx("div",{className:"form__content",children:s.jsxs("form",{onSubmit:ws,className:"w-full overflow-hidden p-6",children:[s.jsxs("div",{className:`w-[200%] flex transition-all duration-500 ${e?"max-h-[350px] min-h-[350px]":"max-h-[300px] min-h-[300px]"}`,style:{transform:`translateX(-${e*50}%)`},children:[s.jsx("div",{className:`w-full grid gap-5 items-start h-fit el__flow ${e?"opacity-0 pointer-events-none":"opacity-100"}`,children:qe.map(b=>s.jsx(ve,{el:b,register:u,errors:f},b.id))}),s.jsxs("div",{className:`w-full grid gap-5 items-start h-fit el__flow ${e?"opacity-100":"opacity-0 pointer-events-none"}`,children:[We.map((b,D)=>D?s.jsx(be,{el:b,register:u,errors:f,...o},b.id):s.jsx(an,{mainPwd:r,pwd:ys,register:u,errors:f,el:b},b.id)),s.jsx(ln,{}),s.jsx(Gn,{setValue:x,watch:g,errors:f})]})]}),s.jsx(Un,{currForm:e,setCurrForm:vs,totLen:2,isNextDisabled:n,children:s.jsx("div",{className:"max-w-[250px] justify-self-center",children:s.jsx(re,{isAging:oe,isDisabled:!bs||n,label:"Register"})})})]})})]})},Hn=()=>(k(),s.jsx(ae,{title:"REGISTER",children:s.jsx(Wn,{})})),Xn=y.object({...Ft}).refine(e=>e.email!==e.password,{message:"Email and Password can not be equal",path:["password"]}).refine(e=>e.email.trim(),{message:"Email is required",path:["email"]}).refine(e=>((e==null?void 0:e.password)??"").trim(),{message:"Password is required",path:["email"]}),Yn=()=>{const e=$(),{wrapMutationAPI:t}=ie(),n=v(O),a=S(),{register:i,formState:{errors:r},handleSubmit:o,reset:c,watch:d}=Q({mode:"onChange",resolver:Z(Xn),defaultValues:{email:"matveevalexander470@gmail.com",password:"@2}mX_}^]3#lA^w5"}}),m=d(),[u,{isLoading:f}]=_n(),g=o(async _=>{await t({cbAPI:()=>u(_)})&&(c(),e("/",{replace:!0}))}),{mainPwd:x}=us(),p=l.useMemo(()=>fe(r,m),[r,m]);return l.useEffect(()=>{n.pushedOut&&(a(ss()),C.util.resetApiState())},[n.pushedOut,a]),s.jsx("div",{className:"parent__form",children:s.jsx("form",{onSubmit:g,className:"form__content",children:s.jsxs("div",{className:"w-full grid gap-5 p-6",children:[s.jsx(ve,{register:i,errors:r,el:ee}),s.jsx(be,{register:i,errors:r,el:Ge,...x}),s.jsx("div",{className:"max-w-[250px] w-full justify-self-center mt-10",children:s.jsx(re,{label:"Login",isDisabled:!p,isAging:f})})]})})})},Kn=()=>(k(),s.jsx(ae,{title:"LOGIN",children:s.jsx(Yn,{})})),Qn=y.object({...se()}).refine(e=>e.email.trim(),{message:"Email is required",path:["email"]}),_s=()=>{const[e,t]=l.useState(!1),{register:n,formState:{errors:a},handleSubmit:i,watch:r}=Q({mode:"onChange",resolver:Z(Qn)}),o=r();return l.useEffect(()=>{t(fe(a,o))},[a,o,t]),{register:n,errors:a,handleSubmit:i,watch:r,isFormOk:e}},Zn=()=>{const{register:e,errors:t,handleSubmit:n,isFormOk:a}=_s(),i=n(()=>{});return s.jsx(ls,{register:e,errors:t,handleSave:i,isFormOk:a})},Jn=()=>(k(),s.jsx(ae,{title:"VERIFY ACCOUNT",canStay:!0,children:s.jsx(Zn,{})})),er=()=>{const{register:e,errors:t,handleSubmit:n,isFormOk:a}=_s(),i=n(()=>{});return s.jsx(ls,{errors:t,register:e,handleSave:i,isFormOk:a})},sr=()=>(k(),s.jsx(ae,{title:"RECOVER PASSWORD",children:s.jsx(er,{})})),tr=()=>{const e=l.useRef(!1),t=v(pn);return l.useEffect(()=>{typeof t.cb=="function"&&!e.current&&(e.current=!0,t.cb())},[t]),s.jsxs("div",{className:"w-full grid justify-items-center gap-y-[75px]",children:[s.jsx("span",{className:"txt__5 txt__col",children:t.notice}),t.type===j.OK?s.jsx("div",{className:"w-fit",children:s.jsx(Js,{className:"icon__notice_lg text-green-600"})}):s.jsx(rs,{classCSS:"icon__notice_lg"})]})},nr=()=>{var t;k();const e=(t=ue().state)==null?void 0:t.from;return Vt(e)?s.jsx("div",{className:"parent__page",children:s.jsx(tr,{})}):s.jsx(T,{to:"/",replace:!0})},rr=()=>{const e=v(O),t=S();return k(),l.useEffect(()=>{e.loggingOut&&t(ss())},[t,e.loggingOut]),s.jsx("div",{children:s.jsx(sn,{})})},ar=C.injectEndpoints({endpoints:e=>({verifyAccount:e.mutation({query:t=>({url:"/verify/verify-account",method:"PATCH",data:t}),async onQueryStarted(t,{queryFulfilled:n,dispatch:a}){de({queryFulfilled:n,dispatch:a})}})})}),{useVerifyAccountMutation:ir}=ar,or=()=>{const[e]=lt(),t=l.useRef(!1),n=$(),a=e.get("userID")??"",i=e.get("token")??"",r=e.get("event")??"",{wrapMutationAPI:o}=ie(),[c]=ir(),d=l.useCallback(async()=>{const m={token:i,userID:a,event:r},u=await o({cbAPI:()=>c(m),pushNotice:[!0]});ne(u)&&n("/",{replace:!0})},[a,i,r,c,o,n]);return l.useEffect(()=>{t.current||(t.current=!0,d())},[d]),s.jsx(cs,{isLoading:!0})},lr=()=>(k(),s.jsx(or,{})),cr=C.injectEndpoints({endpoints:e=>({getSome:e.query({query:()=>({url:"/protected",method:"GET"})})})}),{useGetSomeQuery:dr}=cr,ur=()=>{const e=dr({});return fs({...e}),s.jsx(ds,{children:s.jsx(cs,{...e,children:s.jsx("div",{className:"parent__page txt__col",children:s.jsx("div",{className:"w-full flex justify-center",children:s.jsx("span",{className:"txt__6",children:"Protected page"})})})})})},mr=()=>s.jsx(ds,{children:s.jsx(me,{})}),pr=()=>s.jsx("div",{children:"ProfileSettings"}),fr=()=>s.jsx("div",{children:"ManageAccount"}),xr=()=>{const e=$();return l.useEffect(()=>{Ut(e)},[e]),s.jsxs(ct,{children:[s.jsxs(w,{path:"/",element:s.jsx(Dn,{}),children:[s.jsx(w,{index:!0,element:s.jsx(rr,{})}),s.jsxs(w,{path:"auth",element:s.jsx(Bn,{}),children:[s.jsx(w,{path:"register",element:s.jsx(Hn,{})}),s.jsx(w,{path:"login",element:s.jsx(Kn,{})}),s.jsx(w,{path:"verify-account",element:s.jsx(Jn,{})}),s.jsx(w,{path:"forgot-pwd",element:s.jsx(sr,{})})]}),s.jsxs(w,{path:"user",element:s.jsx(mr,{}),children:[s.jsx(w,{path:"profile-settings",element:s.jsx(pr,{})}),s.jsx(w,{path:"manage-account",element:s.jsx(fr,{})})]}),s.jsx(w,{path:"notice",element:s.jsx(nr,{})}),s.jsx(w,{path:"verify-cb",element:s.jsx(lr,{})}),s.jsx(w,{path:"protected",element:s.jsx(ur,{})})]}),s.jsx(w,{path:"*",element:s.jsx(T,{to:"/",replace:!0})})]})},hr=e=>(_e(),L("logout expired"),e.dispatch(q.actions.openToast({msg:"logout successful",type:j.OK,statusCode:200})),e.dispatch(M.actions.setLoggingOut()),je("/",{replace:!0}),null),gr=(e,t)=>[...Object.values(X).filter(n=>n!==X.REFRESH_EXPIRED)].includes(e==null?void 0:e.msg)?Gt(e==null?void 0:e.msg):(e==null?void 0:e.msg)===X.REFRESH_EXPIRED||t||ge(N.ACCESS)?"session expired":(e==null?void 0:e.message)||"The AI that manage the database has revolted and is taking control of all servers ⚙️",_r=({store:e,response:t})=>{const{data:n,status:a}=t,i=e.getState().auth.isLogged;return e.getState().auth.pushedOut||(_e(),e.dispatch(q.actions.openToast({msg:gr(n,i),type:j.ERR,statusCode:a})),e.dispatch(M.actions.setPushedOut()),je("/auth/login",{replace:!0})),null},jr=({store:e,response:t})=>{const{data:n,status:a}=t,i=he(n),r={notice:i,type:j.ERR};return e.dispatch(Ne.actions.setNotice({...r})),F({data:r,key:N.NOTICE}),e.dispatch(q.actions.openToast({type:j.ERR,msg:i,statusCode:a})),je("/notice",{replace:!0,state:{from:V.GEN}}),null},wr=e=>t=>n=>{const{payload:a}=n,i=e.getState().auth.isLogged;if(a!=null&&a.refreshed&&(i||e.dispatch(M.actions.login())),tt(n)){const{response:r}=a??{},{status:o,data:c,config:d}=r??{};return o===401&&(c!=null&&c.loggingOut)?hr(e):o===401&&xe(d==null?void 0:d.url)?_r({store:e,response:r}):[403,429].includes(o)&&jr({store:e,response:r}),t(n)}return t(n)},br=nt({reducer:{appAPI:C.reducer,sidebar:ze.reducer,auth:M.reducer,toast:q.reducer,notice:Ne.reducer},middleware:e=>e().concat(C.middleware).concat(wr)});Ns.createRoot(document.getElementById("root")).render(s.jsx(l.StrictMode,{children:s.jsx(et,{store:br,children:s.jsx(dt,{children:s.jsx(xr,{})})})}));
